<!DOCTYPE html>
<html lang="en">
<head>
<title>
Pipeline as Code
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="Pipeline as Code" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="Pipeline as Code" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="https://zbynek.github.io/jenkins.io/order-syntax/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="Pipeline as Code" property="og:title">
<meta content="article" property="og:type">
<meta content="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/pipeline-as-code/index.html" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="Pipeline as Code" property="og:site_name">
<meta content="https://zbynek.github.io/jenkins.io/order-syntax/images/logo-title-opengraph.png" name="og:image">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/tether/css/tether.min.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/font-icons.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/jenkins.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/ionicons/css/ionicons.min.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/footer.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/font-awesome.min.css" media="screen" rel="stylesheet">
</head>
<body>
<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<nav class="navbar navbar-expand-lg navbar-dark top bg-dark fixed-top" id="ji-toolbar">
<a class="navbar-brand" href="https://zbynek.github.io/jenkins.io/order-syntax">
Jenkins
</a>
<button class="navbar-toggler" data-target="#CollapsingNavbar" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="CollapsingNavbar">
<ul class="nav navbar-nav mr-auto">
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
<!-- starting partial cdf_logo.html.haml -->
<svg width="36" height="18" xmlns="http://www.w3.org/2000/svg" role="img" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-3.23 44.77 362.70 271.95"><defs><linearGradient id="a" x1="359.765" x2="104.082" y1="134.295" y2="124.577" gradientTransform="matrix(1 0 0 -1 0 439.068)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ed1c24"/><stop offset="1" stop-color="#f7941d"/></linearGradient><linearGradient id="b" x1="355.202" x2="99.519" y1="254.467" y2="244.749" xlink:href="#a"/><linearGradient id="c" x1="183.903" x2="10.612" y1="227.598" y2="221.023" xlink:href="#a"/><linearGradient id="d" x1="367.119" x2="157.995" y1="265.311" y2="257.091" xlink:href="#a"/></defs><path fill="#c49a6c" d="M231.52 309.278c2.483-.332 4.895-.77 7.255-1.329s4.649-1.206 6.991-1.957c13.494-4.58 25.187-12.952 36.374-24.593l-.14-.175c-14.944 15.486-30.693 25.344-50.48 28.054z"/><path fill="url(#a)" d="M224.232 309.96h.332c1.084 0 2.15-.14 3.216-.228a93.844 93.844 0 0 1-3.233.227z"/><path fill="url(#b)" d="M284.692 187.187l-.122.192.122-.192z"/><path fill="url(#c)" d="M146.145 231.847a150.844 150.844 0 0 1-12.97 15.862c-7.582 7.889-15.507 13.563-24.652 16.667a47.832 47.832 0 0 1-4.738 1.326 56.959 56.959 0 0 1-4.916.9 38.32 38.32 0 0 1-1.682.214l-.912.083c-.723.059-1.445.118-2.18.154h-3.068a42.325 42.325 0 0 1-9.192-1.043 49.977 49.977 0 0 1-6.764-2.002 43.097 43.097 0 0 1-4.525-1.954c-1.493-.77-2.961-1.516-4.407-2.37a59.5 59.5 0 0 1-17.105-15.399 59.714 59.714 0 0 1-2.914-4.311 53.09 53.09 0 0 1-1.291-2.263 51.985 51.985 0 0 1-2.263-4.738 46.72 46.72 0 0 1 0-36.426 51.986 51.986 0 0 1 2.263-4.738 54.14 54.14 0 0 1 1.291-2.263 59.742 59.742 0 0 1 2.914-4.311 59.714 59.714 0 0 1 17.105-15.4 60.828 60.828 0 0 1 4.407-2.369q2.217-1 4.525-1.777a49.976 49.976 0 0 1 6.906-2.073 42.325 42.325 0 0 1 9.192-1.042h3.128c.722 0 1.445.094 2.155.154l1.043.106 1.019.119c1.8.237 3.553.557 5.271.96.853.2 1.694.426 2.523.663a51.186 51.186 0 0 1 11.846 5.176 59.645 59.645 0 0 1 4.395 2.89 74.485 74.485 0 0 1 8.386 7.108q2.038 1.99 4.063 4.193l.083-.13a159.395 159.395 0 0 1 11.064 13.942c5.437-8.576 13.658-21.464 16.584-25.74 1.185-1.718 2.37-3.46 3.66-5.212-13.54-16.513-29.827-30.23-51.587-36.082h-.154a89.397 89.397 0 0 0-3.187-.794l-.45-.107a92.565 92.565 0 0 0-3.151-.627l-.628-.119a80.578 80.578 0 0 0-3.743-.569h-.142a58.29 58.29 0 0 0-2.073-.236h-.391l-1.872-.166h-.568l-1.754-.119h-.675l-1.777-.07h-3.115c-46.447-.25-87.125 40.476-87.125 86.911s40.725 87.173 87.172 87.173h3.14l1.729-.071h.734l1.67-.095h.676l1.706-.154h.568l1.813-.213.414-.06 1.967-.272h.213a125.91 125.91 0 0 0 3.553-.628l.652-.142c.96-.201 1.907-.415 2.855-.64l.58-.142a86.66 86.66 0 0 0 3.009-.817l.237-.071c20.73-6.077 36.425-19.392 49.55-35.277-2.037-3.068-3.4-5.366-4.039-6.48z"/><path fill="url(#d)" d="M318.05 51.733v94.66a85.514 85.514 0 0 0-52.595-18.729h-3.115l-1.777.072-.7.047-1.752.118h-.569l-1.871.166h-.391c-.7.071-1.386.142-2.073.237h-.154c-1.256.154-2.5.355-3.732.569l-.628.118c-1.066.19-2.108.403-3.15.628l-.45.107c-30.35 6.858-50.333 28.808-66.822 52.82-.7 1.018-1.35 2.049-2.038 3.068-2.25 3.423-5.46 8.422-8.635 13.397-4.17 6.527-8.292 13.03-9.939 15.66l20.624 32.137s21.997 40.465 61.68 51.482l.237.07c.995.297 2.002.558 3.009.818l.58.142c.936.237 1.896.439 2.855.64l.652.142c1.184.225 2.369.439 3.553.628h.214l1.966.273.415.059 1.812.213h.569l1.705.154h.676l1.67.095h.734l1.73.07h3.139c54.703 0 86.355-30.964 87.149-85.063V51.733zm-52.595 215.403h-3.068c-.734 0-1.457-.095-2.18-.154l-.912-.083c-.568-.06-1.125-.13-1.682-.213a49.077 49.077 0 0 1-9.571-2.275 49.612 49.612 0 0 1-6.634-2.83 55.792 55.792 0 0 1-6.254-3.768 63.068 63.068 0 0 1-3.009-2.215 82.399 82.399 0 0 1-8.683-7.925l-.095.119c-1.255-1.303-2.487-2.69-3.731-4.11-.154-.167-.296-.356-.45-.534-.628-.722-1.256-1.445-1.884-2.215s-1.125-1.398-1.682-2.097-.888-1.101-1.338-1.682a184.467 184.467 0 0 1-6.053-8.292c-.7-.995-1.398-2.025-2.109-3.056-.379-.569-.77-1.184-1.185-1.73-.675-1.018-1.362-2.013-2.049-3.056l-.355-.545c-1.185-1.812-2.37-3.684-3.649-5.603q2.95-4.608 5.817-8.86c1.907-2.831 3.79-5.556 5.662-8.138s3.72-5.046 5.591-7.38 3.72-4.525 5.603-6.586q2.026-2.203 4.063-4.194c1.374-1.338 2.748-2.594 4.158-3.778s2.807-2.287 4.252-3.329a57.594 57.594 0 0 1 7.748-4.62c.331-.166.663-.367 1.006-.533l.226-.118c1.41-.652 2.843-1.185 4.3-1.73l.485-.201c.273-.083.557-.142.83-.237a44.943 44.943 0 0 1 3.34-.948l1.374-.343a60.798 60.798 0 0 1 4.738-.841l1.019-.119 1.042-.106c.711 0 1.434-.119 2.156-.154h3.128a42.431 42.431 0 0 1 4.572.26 48.011 48.011 0 0 1 6.93 1.35c1.54.427 3.08.925 4.596 1.505a48.724 48.724 0 0 1 4.525 1.955c1.493.722 2.961 1.516 4.407 2.369s2.866 1.8 4.24 2.784 2.725 2.049 4.028 3.174a58.459 58.459 0 0 1 8.837 9.477 59.73 59.73 0 0 1 2.914 4.312 51.067 51.067 0 0 1 5.318 11.916 47.38 47.38 0 0 1 1.185 5.165 45.567 45.567 0 0 1 .71 8.09c.072 35.964-16.062 52.122-52.227 52.122z"/></svg>

<!-- ending partial cdf_logo.html.haml -->
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://cd.foundation/">
What is CDF?
</a>
<a class="dropdown-item feature" href="https://jenkins-x.io/">
Jenkins X
</a>
<a class="dropdown-item feature" href="https://cloud.google.com/tekton/">
Tekton
</a>
<a class="dropdown-item feature" href="https://www.spinnaker.io/">
Spinnaker
</a>
</div>
</li>
</ul>
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" href="https://zbynek.github.io/jenkins.io/order-syntax/node">
Blog
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Documentation
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/doc">
Use Jenkins
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/doc/developer">
Extend Jenkins
</a>
<span class="dropdown-item">
<strong>
Use-cases
</strong>
</span>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/android">
&nbsp;-&nbsp;Android
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/c">
&nbsp;-&nbsp;C/C++
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/docker">
&nbsp;-&nbsp;Docker
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/embedded">
&nbsp;-&nbsp;Embedded
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/github">
&nbsp;-&nbsp;GitHub
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/java">
&nbsp;-&nbsp;Java
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/php">
&nbsp;-&nbsp;PHP
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/pipeline">
&nbsp;-&nbsp;Continuous Delivery
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/python">
&nbsp;-&nbsp;Python
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/ruby">
&nbsp;-&nbsp;Ruby
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Community
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/participate">
Overview
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/chat" title="Chat with the rest of the Jenkins community on IRC">
Chat
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/jam">
Meet
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/events">
Events
</a>
<a class="dropdown-item feature" href="https://issues.jenkins-ci.org/">
Issue Tracker
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/mailing-lists" title="Browse Jenkins mailing list archives and/or subscribe to lists">
Mailing Lists
</a>
<a class="dropdown-item feature" href="https://wiki.jenkins.io/">
Wiki
</a>
<a class="dropdown-item feature" href="https://accounts.jenkins.io/" title="Create/manage your account for accessing wiki, issue tracker, etc">
Account Management
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/">
<strong>
Special Interest Groups
</strong>
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/advocacy-and-outreach/">
&nbsp;-&nbsp;Advocacy and Outreach
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/chinese-localization/">
&nbsp;-&nbsp;Chinese Localization
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/cloud-native/">
&nbsp;-&nbsp;Cloud Native
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/docs/">
&nbsp;-&nbsp;Documentation
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/gsoc/">
&nbsp;-&nbsp;Google Summer of Code
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/hw-and-eda/">
&nbsp;-&nbsp;Hardware and EDA
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/pipeline-authoring/">
&nbsp;-&nbsp;Pipeline Authoring
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/platform/">
&nbsp;-&nbsp;Platform
</a>
</div>
</li>
<li class="dropdown nav-item">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Subprojects
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/">
Overview
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/blueocean/">
Blue Ocean
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/evergreen/">
Evergreen
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/gsoc/">
Google Summer of Code in Jenkins
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/infrastructure/">
Infrastructure
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/jam/">
Jenkins Area Meetups
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/jcasc/">
Jenkins Configuration as Code
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/remoting/">
Jenkins Remoting
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
About
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/security">
Security
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/press">
Press
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/awards">
Awards
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/project/conduct">
Conduct
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/artwork">
Artwork
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
English
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/zh">
中文 Chinese
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link btn btn-outline-secondary" href="https://zbynek.github.io/jenkins.io/order-syntax/download">
Download
</a>
</li>
</ul>
</div>
</nav>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<script>
  $(function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>
<div class="container">
<div class="row body">
<div class="col-lg-3">
<div class="sidebar-nav tour">
<p>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc" class="">Jenkins User Documentation Home</a>
</p>
<h4>
Guided Tour
</h4>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/getting-started" class="">Getting started</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/hello-world" class="">Creating your first Pipeline</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/running-multiple-steps" class="">Running multiple steps</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/agents" class="">Defining execution environments</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/environment" class="">Using environment variables</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/tests-and-artifacts" class="">Recording test results and artifacts</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/post" class="">Cleaning up and notifications</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/deployment" class="">Deployment</a>
</li>
</ul>
<h4>
Tutorials
</h4>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials" class="">Overview</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-java-app-with-maven" class="">Build a Java app with Maven</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-node-js-and-react-app-with-npm" class="">Build a Node.js and React app with npm</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-python-app-with-pyinstaller" class="">Build a Python app with PyInstaller</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-labview-app" class="">Build a LabVIEW app</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/create-a-pipeline-in-blue-ocean" class="">Create a Pipeline in Blue Ocean</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-multibranch-pipeline-project" class="">End-to-End Multibranch Pipeline Project Creation</a>
</li>
</ul>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/getting-started" class="">User Handbook overview</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/installing" class="">Installing Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/using" class="">Using Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/pipeline" class="active">Pipeline</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/blueocean" class="">Blue Ocean</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/managing" class="">Managing Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/system-administration" class="">System Administration</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/scaling" class="">Scaling Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/appendix" class="">Appendix</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/glossary" class="">Glossary</a>
</li>
</ul>
<h4>
Resources
</h4>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/pipeline/syntax" class="">Pipeline Syntax reference</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/steps" class="">Pipeline Steps reference</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/upgrade-guide" class="">LTS Upgrade Guide</a>
</li>
</ul>
<h5>
Recent Tutorial Blog Posts
</h5>
<ul>
<li>
<a href="/blog/2017/11/27/tutorials-in-the-jenkins-user-documentation/">
Introducing Tutorials in the Jenkins User Documentation
</a>
</li>
<li>
<a href="/blog/2017/05/18/pipeline-dev-tools/">
Pipeline Development Tools
</a>
</li>
<li>
<a href="/blog/2017/04/12/welcome-to-blue-ocean-dashboard/">
Getting Started with the Blue Ocean Dashboard
</a>
</li>
</ul>
<div class="small">
<a href="/node/tags/tutorial">
View all tutorial blog posts
</a>
</div>
<p></p>
</div>
</div>
<div class="col-lg-9">
<h1>
Pipeline as Code
</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#pipeline-as-code">Pipeline as Code</a>
<ul class="sectlevel2">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#continuous-delivery-with-pipeline">Continuous Delivery with Pipeline</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="pipeline-as-code"><a class="anchor" href="#pipeline-as-code"></a>Pipeline as Code</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h3>
<div class="paragraph">
<p><em>Pipeline as Code</em> describes a set of features that allow Jenkins users to
define pipelined job processes with code, stored and versioned in a source
repository.  These features allow Jenkins to discover, manage, and run jobs for
multiple source repositories and branches&#8201;&#8212;&#8201;eliminating the need for manual job
creation and management.</p>
</div>
<div class="paragraph">
<p>To use <em>Pipeline as Code</em>, projects must contain a file named <code>Jenkinsfile</code> in
the repository root, which contains a "Pipeline script."</p>
</div>
<div class="paragraph">
<p>Additionally, one of the enabling jobs needs to be configured in Jenkins:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Multibranch Pipeline</em>: build multiple branches of a <em>single</em> repository automatically</p>
</li>
<li>
<p><em>Organization Folders</em>: scan a <strong>GitHub Organization</strong> or <strong>Bitbucket Team</strong> to
discover an organization&#8217;s repositories, automatically creating managed
<em>Multibranch Pipeline</em> jobs for them</p>
</li>
<li>
<p><em>Pipeline</em>: Regular Pipeline jobs have an option when specifying the pipeline to "Use SCM".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Fundamentally, an organization&#8217;s repositories can be viewed as a hierarchy,
where each repository may have child elements of branches and pull requests.</p>
</div>
<div class="listingblock">
<div class="title">Example Repository Structure</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code>+--- GitHub Organization
    +--- Project 1
        +--- master
        +--- feature-branch-a
        +--- feature-branch-b
    +--- Project 2
        +--- master
        +--- pull-request-1
        +--- etc...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>Prior to _Multibranch Pipeline_ jobs and _Organization Folders_,
plugin:cloudbees-folder[Folders]
could be used to create this hierarchy in Jenkins by organizing repositories
into folders containing jobs for each individual branch.</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Multibranch Pipeline</em> and <em>Organization Folders</em> eliminate the manual process
by detecting branches and repositories, respectively, and creating appropriate
folders with jobs in Jenkins automatically.</p>
</div>
<div class="sect3">
<h4 id="the-jenkinsfile"><a class="anchor" href="#the-jenkinsfile"></a>The Jenkinsfile</h4>
<div class="paragraph">
<p>Presence of the <code>Jenkinsfile</code> in the root of a repository makes it eligible for
Jenkins to automatically manage and execute jobs based on repository branches.</p>
</div>
<div class="paragraph">
<p>The <code>Jenkinsfile</code> should contain a Pipeline script, specifying the steps to
execute the job.  The script has all the power of Pipeline available, from
something as simple as invoking a Maven builder, to a series of interdependent
steps, which have coordinated parallel execution with deployment and validation
phases.</p>
</div>
<div class="paragraph">
<p>A simple way to get started with Pipeline is to use the <em>Snippet Generator</em>
available in the configuration screen for a Jenkins <em>Pipeline</em> job.  Using the
<em>Snippet Generator</em>, you can create a Pipeline script as you might through the
dropdowns in other Jenkins jobs.</p>
</div>
</div>
<div class="sect3">
<h4 id="folder-computation"><a class="anchor" href="#folder-computation"></a>Folder Computation</h4>
<div class="paragraph">
<p><em>Multibranch Pipeline</em> projects and <em>Organization Folders</em> extend the existing
folder functionality by introducing 'computed' folders.  Computed folders
automatically run a process to manage the folder contents.  This computation, in
the case of <em>Multibranch Pipeline</em> projects, creates child items for each
eligible branch within the child.  For <em>Organization Folders</em>, computation
populates child items for repositories as individual <em>Multibranch Pipelines</em>.</p>
</div>
<div class="paragraph">
<p>Folder computation may happen automatically via webhook callbacks, as branches
and repositories are created or removed.  Computation may also be triggered by
the <em>Build Trigger</em> defined in the configuration, which will automatically run a
computation task after a period of inactivity (this defaults to run after one
day).</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/folder-computation-build-trigger-schedule.png" alt="folder computation build trigger schedule">
</div>
</div>
<div class="paragraph">
<p>Information about the last execution of the folder computation is available in
the <strong>Folder Computation</strong> section.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/folder-computation-main.png" alt="folder computation main" width="75%">
</div>
</div>
<div class="paragraph">
<p>The log from the last attempt to compute the folder is available from this page.
If folder computation doesn&#8217;t result in an expected set of repositories, the log
may have useful information to diagnose the problem.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/folder-computation-log.png" alt="folder computation log" width="75%">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h3>
<div class="paragraph">
<p>Both <em>Multibranch Pipeline</em> projects and <em>Organization Folders</em> have
configuration options to allow precise selection of repositories.  These
features also allow selection of two types of credentails to use when connecting
to the remote systems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>scan</em> credentials, which are used for accessing the GitHub or Bitbucket APIs</p>
</li>
<li>
<p><em>checkout</em> credentials, which are used when the repository is cloned from the
remote system; it may be useful to choose an SSH key or <em>"- anonymous -"</em>,
which uses the default credentials configured for the OS user</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you are using a <em>GitHub Organization</em>, you should <a href="https://github.com/settings/tokens/new?scopes=repo,public_repo,admin:repo_hook,admin:org_hook&amp;description=Jenkins+Access">create a GitHub access token</a> to use to avoid storing your password in Jenkins and prevent any issues when using the GitHub API.
When using a GitHub access token, you must use standard <em>Username with password</em> credentials, where the username is the same as your GitHub username and the password is your access token.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="multibranch-pipeline-projects"><a class="anchor" href="#multibranch-pipeline-projects"></a>Multibranch Pipeline Projects</h4>
<div class="paragraph">
<p><em>Multibranch Pipeline</em> projects are one of the fundamental enabling features for
<em>Pipeline as Code</em>.  Changes to the build or deployment procedure can evolve
with project requirements and the job always reflects the current state of the
project.  It also allows you to configure different jobs for different branches
of the same project, or to forgo a job if appropriate.  The <code>Jenkinsfile</code> in the
root directory of a branch or pull request identifies a multibranch project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>Multibranch Pipeline</em> projects expose the name of the branch being built with
the <code>BRANCH_NAME</code> environment variable and provide a special <code>checkout scm</code>
Pipeline command, which is guaranteed to check out the specific commit that the
Jenkinsfile originated.  If the Jenkinsfile needs to check out the repository
for any reason, make sure to use <code>checkout scm</code>, as it also accounts for
alternate origin repositories to handle things like pull requests.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To create a <em>Multibranch Pipeline</em>, go to: <em>New Item &#8594; Multibranch Pipeline</em>.
Configure the SCM source as appropriate.  There are options for many different
types of repositories and services including Git, Mercurial, Bitbucket, and
GitHub.  If using GitHub, for example, click <strong>Add source</strong>, select GitHub and
configure the appropriate owner, scan credentials, and repository.</p>
</div>
<div class="paragraph">
<p>Other options available to <em>Multibranch Pipeline</em> projects are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>API endpoint</strong> - an alternate API endpoint to use a self-hosted GitHub Enterprise</p>
</li>
<li>
<p><strong>Checkout credentials</strong> - alternate credentials to use when checking out the code (cloning)</p>
</li>
<li>
<p><strong>Include branches</strong> - a regular expression to specify branches to include</p>
</li>
<li>
<p><strong>Exclude branches</strong> - a regular expression to specify branches to exclude; note that this will take precedence over includes</p>
</li>
<li>
<p><strong>Property strategy</strong> - if necessary, define custom properties for each branch</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After configuring these items and saving the configuration, Jenkins will
automatically scan the repository and import appropriate branches.</p>
</div>
</div>
<div class="sect3">
<h4 id="organization-folders"><a class="anchor" href="#organization-folders"></a>Organization Folders</h4>
<div class="paragraph">
<p>Organization Folders offer a convenient way to allow Jenkins to automatically manage which repositories are automatically included in Jenkins.
Particularly, if your organization utilizes <em>GitHub Organizations</em> or <em>Bitbucket Teams</em>, any time a developer creates a new repository
with a <code>Jenkinsfile</code>, Jenkins will automatically detect it and create a <em>Multibranch Pipeline</em> project for it.
This alleviates the need for administrators or developers to manually create projects for these new repositories.</p>
</div>
<div class="paragraph">
<p>To create an <em>Organization Folder</em> in Jenkins, go to: <strong>New Item &#8594; GitHub Organization</strong> or <strong>New Item &#8594; Bitbucket Team</strong> and follow the configuration steps for each item,
making sure to specify appropriate <em>Scan Credentials</em> and a specific <strong>owner</strong> for the GitHub Organization or Bitbucket Team name, respectively.</p>
</div>
<div class="paragraph">
<p>Other options available are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Repository name pattern</strong> - a regular expression to specify which repositories are <strong>included</strong></p>
</li>
<li>
<p><strong>API endpoint</strong> - an alternate API endpoint to use a self-hosted GitHub Enterprise</p>
</li>
<li>
<p><strong>Checkout credentials</strong> - alternate credentials to use when checking out the code (cloning)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After configuring these items and saving the configuration, Jenkins will automatically scan the organization and import appropriate repositories and resulting branches.</p>
</div>
</div>
<div class="sect3">
<h4 id="orphaned-item-strategy"><a class="anchor" href="#orphaned-item-strategy"></a>Orphaned Item Strategy</h4>
<div class="paragraph">
<p>Computed folders can remove items immediately or leave them based on a desired retention strategy.
By default, items will be removed as soon as the folder computation determines they are no longer present.
If your organization requires these items remain available for a longer period of time, simply configure the Orphaned Item Strategy appropriately.
It may be useful to keep items in order to examine build results of a branch after it&#8217;s been removed, for example.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/orphaned-item-strategy.png" alt="orphaned item strategy">
</div>
</div>
</div>
<div class="sect3">
<h4 id="icon-and-view-strategy"><a class="anchor" href="#icon-and-view-strategy"></a>Icon and View Strategy</h4>
<div class="paragraph">
<p>You may also configure an icon to use for the folder display.
For example, it might be useful to display an aggregate health of the child builds.
Alternately, you might reference the same icon you use in your GitHub organization account.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/folder-icon.png" alt="folder icon">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example"><a class="anchor" href="#example"></a>Example</h3>
<div class="paragraph">
<p>To demonstrate using an Organization Folder to manage repositories, we&#8217;ll use
the fictitious organization: CloudBeers, Inc..</p>
</div>
<div class="paragraph">
<p>Go to <strong>New Item</strong>.
Enter 'cloudbeers' for the item name.
Select <strong>GitHub Organization</strong> and click <strong>OK</strong>.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/screenshot1.png" alt="screenshot1">
</div>
</div>
<div class="paragraph">
<p>Optionally, enter a better descriptive name for the <em>Description</em>, such as 'CloudBeers GitHub'.
In the <em>Repository Sources</em> section, complete the section for "GitHub Organization".
Make sure the <strong>owner</strong> matches the GitHub Organization name exactly, in our case it must be: <em>cloudbeers</em>.
This defaults to the same value that was entered for the item name in the first step.
Next, select or add new "Scan credentials" - we&#8217;ll enter our GitHub username and access token as the password.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/screenshot2.png" alt="screenshot2">
</div>
</div>
<div class="paragraph">
<p>After saving, the "Folder Computation" will run to scan for eligible repositories, followed by multibranch builds.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/screenshot3.png" alt="screenshot3">
</div>
</div>
<div class="paragraph">
<p>Refresh the page after the job runs to ensure the view of repositories has been updated.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/screenshot4.png" alt="screenshot4">
</div>
</div>
<div class="paragraph">
<p>A this point, you&#8217;re finished with basic project configuration and can now explore your imported repositories.
You can also investigate the results of the jobs run as part of the initial <em>Folder Computation</em>.</p>
</div>
<div class="imageblock image-border">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/screenshot5.png" alt="screenshot5">
</div>
</div>
</div>
<div class="sect2">
<h3 id="continuous-delivery-with-pipeline"><a class="anchor" href="#continuous-delivery-with-pipeline"></a>Continuous Delivery with Pipeline</h3>
<div class="sect3">
<h4 id="introduction-2"><a class="anchor" href="#introduction-2"></a>Introduction</h4>
<div class="paragraph">
<p>Continuous delivery allows organizations to deliver software with lower risk.
The path to continuous delivery starts by modeling the software delivery
pipeline used within the organization and then focusing on the automation of it
all. Early, directed feedback, enabled by pipeline automation enables software
delivery more quickly over traditional methods of delivery.</p>
</div>
<div class="paragraph">
<p>Jenkins is the Swiss army knife in the software delivery toolchain. Developers
and operations (DevOps) personnel have different mindsets and use different
tools to get their respective jobs done. Since Jenkins integrates with a huge
variety of toolsets, it serves as the intersection point between development and
operations teams.</p>
</div>
<div class="paragraph">
<p>Many organizations have been orchestrating pipelines with existing Jenkins
plugins for several years. As their automation sophistication and their own
Jenkins experience increases, organizations inevitably want to move beyond
simple pipelines and create complex flows specific to their delivery process.</p>
</div>
<div class="paragraph">
<p>These Jenkins users require a feature that treats complex pipelines as a
first-class object, and so the <a href="https://plugins.jenkins.io/workflow-aggregator">Pipeline plugin</a>
was developed .</p>
</div>
</div>
<div class="sect3">
<h4 id="pre-requisites"><a class="anchor" href="#pre-requisites"></a>Pre-requisites</h4>
<div class="paragraph">
<p>Continuous delivery is a process - rather than a tool - and requires a mindset
and culture that must percolate from the top-down within an organization. Once
the organization has bought into the philosophy, the next and most difficult
part is mapping the flow of software as it makes its way from development to
production.</p>
</div>
<div class="paragraph">
<p>The root of such a pipeline will always be an orchestration tool like a Jenkins,
but there are some key requirements that such an integral part of the pipeline
must satisfy before it can be tasked with enterprise-critical processes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Zero or low downtime disaster recovery</strong>: A commit, just as a mythical hero,
encounters harder and longer challenges as it makes its way down the pipeline.
It is not unusual to see pipeline executions that last days. A hardware or a
Jenkins failure on day six of a seven-day pipeline has serious consequences
for on-time delivery of a product.</p>
</li>
<li>
<p><strong>Audit runs and debug ability</strong>: Build managers like to see the exact execution
flow through the pipeline, so they can easily debug issues.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To ensure a tool can scale with an organization and suitably automate existing delivery pipelines without changing them, the tool should also support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Complex pipelines</strong>: Delivery pipelines are typically more complex than
canonical examples (linear process: Dev&#8594;Test&#8594;Deploy, with a couple of
operations at each stage). Build managers want constructs that help
parallelize parts of the flow, run loops, perform retries and so forth. Stated
differently, build managers want programming constructs to define pipelines.</p>
</li>
<li>
<p><strong>Manual interventions</strong>: Pipelines cross intra-organizational boundaries
necessitating manual handoffs and interventions. Build managers seek
capabilities such as being able to pause a pipeline for a human to intervene
and make manual decisions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Pipeline plugin allows users to create such a pipeline through a new job
type called Pipeline. The flow definition is captured in a Groovy script, thus
adding control flow capabilities such as loops, forks and retries. Pipeline
allows for stages with the option to set concurrencies, preventing multiple
builds of the same pipeline from trying to access the same resource at the same
time.</p>
</div>
</div>
<div class="sect3">
<h4 id="concepts"><a class="anchor" href="#concepts"></a>Concepts</h4>
<div class="paragraph">
<div class="title">Pipeline Job Type</div>
<p>There is just one job to capture the entire software delivery pipeline in an
organization. Of course, you can still connect two Pipeline job types together
if you want. A Pipeline job type uses a Groovy-based DSL for job definitions.
    The DSL affords the advantage of defining jobs programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node(<span style="color:#F00;background-color:#FAA">‘</span>linux<span style="color:#F00;background-color:#FAA">’</span>){
  git <span style="color:#606">url</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://github.com/jglick/simple-maven-project-with-tests.git</span><span style="color:#710">'</span></span>
  <span style="color:#080;font-weight:bold">def</span> mvnHome = tool <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">M3</span><span style="color:#710">'</span></span>
  env.PATH = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>mvnHome<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">/bin:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.PATH<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mvn -B clean verify</span><span style="color:#710">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Stages</div>
<p>Intra-organizational (or conceptual) boundaries are captured through a primitive
called "stages." A deployment pipeline consists of various stages, where each
subsequent stage builds on the previous one. The idea is to spend as few
resources as possible early in the pipeline and find obvious issues, rather than
spend a lot of computing resources for something that is ultimately discovered
to be broken.</p>
</div>
<div id="throttled-concurrent" class="imageblock">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/stage-concurrency.png" alt="stage concurrency">
</div>
<div class="title">Figure 1. Throttled stage concurrency with Pipeline</div>
</div>
<div class="paragraph">
<p>Consider a simple pipeline with three stages. A naive implementation of this
pipeline can sequentially trigger each stage on every commit. Thus, the
deployment step is triggered immediately after the Selenium test steps are
complete. However, this would mean that the deployment from commit two overrides
the last deployment in motion from commit one. The right approach is for commits
two and three to wait for the deployment from commit one to complete,
consolidate all the changes that have happened since commit one and trigger the
deployment. If there is an issue, developers can easily figure out if the issue
was introduced in commit two or commit three.</p>
</div>
<div class="paragraph">
<p>Pipeline provides this functionality by enhancing the stage primitive.  For
example, a stage can have a concurrency level of one defined to indicate that at
any point only one thread should be running through the stage. This achieves the
desired state of running a deployment as fast as it should run.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"> stage <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Production</span><span style="color:#710">'</span></span>, <span style="color:#606">concurrency</span>: <span style="color:#00D">1</span>
 node {
     unarchive <span style="color:#606">mapping</span>: [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">target/x.war</span><span style="color:#710">'</span></span> : <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">x.war</span><span style="color:#710">'</span></span>]
     deploy <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">target/x.war</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">production</span><span style="color:#710">'</span></span>
     echo <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Deployed to http://localhost:8888/production/</span><span style="color:#710">'</span></span>
 }</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Gates and Approvals</div>
<p>Continuous delivery means having binaries in a release ready state whereas
continuous deployment means pushing the binaries to production - or automated
deployments. Although continuous deployment is a sexy term and a desired state,
in reality organizations still want a human to give the final approval before
bits are pushed to production.  This is captured through the "input" primitive
in Pipeline. The input step can wait indefinitely for a human to intervene.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">input <span style="color:#606">message</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Does http://localhost:8888/staging/ look good?</span><span style="color:#710">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Deployment of Artifacts to Staging/Production</div>
<p>Deployment of binaries is the last mile in a pipeline. The numerous servers
employed within the organization and available in the market make it difficult
to employ a uniform deployment step. Today, these are solved by third-party
deployer products whose job it is to focus on deployment of a particular stack
to a data center. Teams can also write their own extensions to hook into the
Pipeline job type and make the deployment easier.</p>
</div>
<div class="paragraph">
<p>Meanwhile, job creators can write a plain old Groovy function to define any
custom steps that can deploy (or undeploy) artifacts from production.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">deploy</span>(war, id) {
    sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">cp </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>war<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> /tmp/webapps/</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>id<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">.war</span><span style="color:#710">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Restartable flows</div>
<p>All Pipelines are resumable, so if Jenkins needs to be restarted while a flow is
running, it should resume at the same point in its execution after Jenkins
starts back up. Similarly, if a flow is running a lengthy sh or bat step when an
agent unexpectedly disconnects, no progress should be lost when connectivity is
restored.</p>
</div>
<div class="paragraph">
<p>There are some cases when a flow build will have done a great deal of work and
proceeded to a point where a transient error occurred: one which does not
reflect the inputs to this build, such as source code changes. For example,
after completing a lengthy build and test of a software component, final
deployment to a server might fail because of network problems.</p>
</div>
<div class="paragraph">
<div class="title">Pipeline Stage View</div>
<p>When you have complex builds pipelines, it is useful to see the progress of each
stage and to see where build failures are occurring in the pipeline. This can
enable users to debug which tests are failing at which stage or if there are
other problems in their pipeline. Many organization also want to make their
pipelines user-friendly for non-developers without having to develop a homegrown
UI, which can prove to be a lengthy and ongoing development effort.</p>
</div>
<div class="paragraph">
<p>The Pipeline Stage View feature offers extended visualization of Pipeline build
history on the index page of a flow project. This visualization also includes
helpful metrics like average run time by stage and by build, and a user-friendly
interface for interacting with input steps.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/workflow-big-responsive.png" alt="workflow big responsive">
</div>
<div class="title">Figure 2. Pipeline Stage View plugin</div>
</div>
<div class="paragraph">
<p>The only prerequisite for this plugin is a pipeline with defined stages in the
flow. There can be as many stages as you desired and they can be in a linear
sequence, and the stage names will be displayed as columns in the Stage View
interface.</p>
</div>
<div class="sect4">
<h5 id="artifact-traceability-and-with-fingerprints"><a class="anchor" href="#artifact-traceability-and-with-fingerprints"></a>Artifact traceability and with fingerprints</h5>
<div class="paragraph">
<p>Traceability is important for DevOps teams who need to be able to trace code
from commit to deployment. It enables impact analysis by showing relationships
between artifacts and allows for visibility into the full lifecycle of an
artifact, from its code repository to where the artifact is eventually deployed
in production.</p>
</div>
<div class="paragraph">
<p>Jenkins and the Pipeline feature support tracking versions of artifacts using
file fingerprinting, which allows users to trace which downstream builds are
using any given artifact. To fingerprint with Pipeline, simply add a
"fingerprint: true" argument to any artifact archiving step. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">archiveArtifacts <span style="color:#606">artifacts</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">**</span><span style="color:#710">'</span></span>, <span style="color:#606">fingerprint</span>: <span style="color:#069">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will archive any WAR artifacts created in the Pipeline and fingerprint them for
traceability. This trace log of this artifact and a list of all fingerprinted
artifacts in a build will then be available in the left-hand menu of Jenkins:</p>
</div>
<div class="paragraph">
<p>To find where an artifact is used and deployed to, simply follow the "more
details" link through the artifact’s name and view the entires for the artifact
in its "Usage" list.</p>
</div>
<div id="fingerprinting" class="imageblock">
<div class="content">
<img src="/doc/book/resources/pipeline-as-code/fingerprinting.png" alt="fingerprinting">
</div>
<div class="title">Figure 3. Fingerprint of a WAR</div>
</div>
<div class="paragraph">
<p>For more information, visit the
<a href="https://wiki.jenkins.io/display/JENKINS/Fingerprint">fingerprint
documentation</a> to learn more about how fingerprints work.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>


<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/anchor-js/anchor.min.js"></script>
<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/tether/js/tether.min.js"></script>
<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<footer id="footer">
<div class="container">
<div class="row">
<div class="col-md-4">
<p class="box">
<a href="https://github.com/jenkins-infra/jenkins.io/edit/master/content//doc/book/pipeline-as-code.adoc" title="Edit /doc/book/pipeline-as-code.adoc on GitHub">Improve this page</a>
|
<a href="https://github.com/jenkins-infra/jenkins.io/commits/master/content//doc/book/pipeline-as-code.adoc" title="View /doc/book/pipeline-as-code.adoc history on GitHub">Page history</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img alt="Creative Commons Attribution-ShareAlike license" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
The content driving this site is licensed under the Creative
Commons Attribution-ShareAlike 4.0 license.
</p>
</div>
</div>
</div>
<div class="links col-md-8">
<div class="container">
<div class="row">
<div class="area col-md-3">
<div class="div-mar">
<h5>Resources</h5>
<ul class="resources">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/download">
Downloads
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/node">
Blog
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc">
Documentation
</a>
</li>
<li>
<a href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/security">
Security
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/participate">
Contributing
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Project</h5>
<ul class="project">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/project">
Structure and governance
</a>
</li>
<li>
<a href="https://issues.jenkins-ci.org">
Issue tracker
</a>
</li>
<li>
<a href="https://wiki.jenkins.io">
Wiki
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins on Jenkins
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Community</h5>
<ul class="community">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/events">
Events
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/mailing-lists">
Mailing lists
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/chat">
Chats
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/sigs">
Special Interest Groups
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Other</h5>
<ul class="other">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/conduct">
Code of Conduct
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/press">
Press information
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/merchandise">
Merchandise
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/artwork">
Artwork
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/awards">
Awards
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
  
  $(function(){
    var $body = $(document.body);
    $(".nav-link.dropdown-toggle").on("mousedown", function(){
      $body.addClass("no-outline");
    })
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
</body>
</html>
