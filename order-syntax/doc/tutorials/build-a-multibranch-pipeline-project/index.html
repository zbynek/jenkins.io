<!DOCTYPE html>
<html lang="en">
<head>
<title>
End-to-End Multibranch Pipeline Project Creation
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="description">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<!-- Favicons -->
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/site.webmanifest" rel="manifest">
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon">
<meta content="#2b5797" name="msapplication-TileColor">
<meta content="#ffffff" name="theme-color">
<meta content="End-to-End Multibranch Pipeline Project Creation" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="End-to-End Multibranch Pipeline Project Creation" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content="https://zbynek.github.io/jenkins.io/order-syntax/images/logo-title-opengraph.png" name="twitter:image">
<!-- Open Graph data -->
<meta content="End-to-End Multibranch Pipeline Project Creation" property="og:title">
<meta content="article" property="og:type">
<meta content="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-multibranch-pipeline-project/index.html" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software" name="og:description">
<meta content="End-to-End Multibranch Pipeline Project Creation" property="og:site_name">
<meta content="https://zbynek.github.io/jenkins.io/order-syntax/images/logo-title-opengraph.png" name="og:image">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/tether/css/tether.min.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/font-icons.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/jenkins.css" media="screen" rel="stylesheet">
<!-- Non-obtrusive CSS styles -->
<link href="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/ionicons/css/ionicons.min.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/footer.css" media="screen" rel="stylesheet">
<link href="https://zbynek.github.io/jenkins.io/order-syntax/css/font-awesome.min.css" media="screen" rel="stylesheet">
</head>
<body>
<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/jquery/jquery.min.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<nav class="navbar navbar-expand-lg navbar-dark top bg-dark fixed-top" id="ji-toolbar">
<a class="navbar-brand" href="https://zbynek.github.io/jenkins.io/order-syntax">
Jenkins
</a>
<button class="navbar-toggler" data-target="#CollapsingNavbar" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="CollapsingNavbar">
<ul class="nav navbar-nav mr-auto">
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
<!-- starting partial cdf_logo.html.haml -->
<svg width="36" height="18" xmlns="http://www.w3.org/2000/svg" role="img" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-3.23 44.77 362.70 271.95"><defs><linearGradient id="a" x1="359.765" x2="104.082" y1="134.295" y2="124.577" gradientTransform="matrix(1 0 0 -1 0 439.068)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ed1c24"/><stop offset="1" stop-color="#f7941d"/></linearGradient><linearGradient id="b" x1="355.202" x2="99.519" y1="254.467" y2="244.749" xlink:href="#a"/><linearGradient id="c" x1="183.903" x2="10.612" y1="227.598" y2="221.023" xlink:href="#a"/><linearGradient id="d" x1="367.119" x2="157.995" y1="265.311" y2="257.091" xlink:href="#a"/></defs><path fill="#c49a6c" d="M231.52 309.278c2.483-.332 4.895-.77 7.255-1.329s4.649-1.206 6.991-1.957c13.494-4.58 25.187-12.952 36.374-24.593l-.14-.175c-14.944 15.486-30.693 25.344-50.48 28.054z"/><path fill="url(#a)" d="M224.232 309.96h.332c1.084 0 2.15-.14 3.216-.228a93.844 93.844 0 0 1-3.233.227z"/><path fill="url(#b)" d="M284.692 187.187l-.122.192.122-.192z"/><path fill="url(#c)" d="M146.145 231.847a150.844 150.844 0 0 1-12.97 15.862c-7.582 7.889-15.507 13.563-24.652 16.667a47.832 47.832 0 0 1-4.738 1.326 56.959 56.959 0 0 1-4.916.9 38.32 38.32 0 0 1-1.682.214l-.912.083c-.723.059-1.445.118-2.18.154h-3.068a42.325 42.325 0 0 1-9.192-1.043 49.977 49.977 0 0 1-6.764-2.002 43.097 43.097 0 0 1-4.525-1.954c-1.493-.77-2.961-1.516-4.407-2.37a59.5 59.5 0 0 1-17.105-15.399 59.714 59.714 0 0 1-2.914-4.311 53.09 53.09 0 0 1-1.291-2.263 51.985 51.985 0 0 1-2.263-4.738 46.72 46.72 0 0 1 0-36.426 51.986 51.986 0 0 1 2.263-4.738 54.14 54.14 0 0 1 1.291-2.263 59.742 59.742 0 0 1 2.914-4.311 59.714 59.714 0 0 1 17.105-15.4 60.828 60.828 0 0 1 4.407-2.369q2.217-1 4.525-1.777a49.976 49.976 0 0 1 6.906-2.073 42.325 42.325 0 0 1 9.192-1.042h3.128c.722 0 1.445.094 2.155.154l1.043.106 1.019.119c1.8.237 3.553.557 5.271.96.853.2 1.694.426 2.523.663a51.186 51.186 0 0 1 11.846 5.176 59.645 59.645 0 0 1 4.395 2.89 74.485 74.485 0 0 1 8.386 7.108q2.038 1.99 4.063 4.193l.083-.13a159.395 159.395 0 0 1 11.064 13.942c5.437-8.576 13.658-21.464 16.584-25.74 1.185-1.718 2.37-3.46 3.66-5.212-13.54-16.513-29.827-30.23-51.587-36.082h-.154a89.397 89.397 0 0 0-3.187-.794l-.45-.107a92.565 92.565 0 0 0-3.151-.627l-.628-.119a80.578 80.578 0 0 0-3.743-.569h-.142a58.29 58.29 0 0 0-2.073-.236h-.391l-1.872-.166h-.568l-1.754-.119h-.675l-1.777-.07h-3.115c-46.447-.25-87.125 40.476-87.125 86.911s40.725 87.173 87.172 87.173h3.14l1.729-.071h.734l1.67-.095h.676l1.706-.154h.568l1.813-.213.414-.06 1.967-.272h.213a125.91 125.91 0 0 0 3.553-.628l.652-.142c.96-.201 1.907-.415 2.855-.64l.58-.142a86.66 86.66 0 0 0 3.009-.817l.237-.071c20.73-6.077 36.425-19.392 49.55-35.277-2.037-3.068-3.4-5.366-4.039-6.48z"/><path fill="url(#d)" d="M318.05 51.733v94.66a85.514 85.514 0 0 0-52.595-18.729h-3.115l-1.777.072-.7.047-1.752.118h-.569l-1.871.166h-.391c-.7.071-1.386.142-2.073.237h-.154c-1.256.154-2.5.355-3.732.569l-.628.118c-1.066.19-2.108.403-3.15.628l-.45.107c-30.35 6.858-50.333 28.808-66.822 52.82-.7 1.018-1.35 2.049-2.038 3.068-2.25 3.423-5.46 8.422-8.635 13.397-4.17 6.527-8.292 13.03-9.939 15.66l20.624 32.137s21.997 40.465 61.68 51.482l.237.07c.995.297 2.002.558 3.009.818l.58.142c.936.237 1.896.439 2.855.64l.652.142c1.184.225 2.369.439 3.553.628h.214l1.966.273.415.059 1.812.213h.569l1.705.154h.676l1.67.095h.734l1.73.07h3.139c54.703 0 86.355-30.964 87.149-85.063V51.733zm-52.595 215.403h-3.068c-.734 0-1.457-.095-2.18-.154l-.912-.083c-.568-.06-1.125-.13-1.682-.213a49.077 49.077 0 0 1-9.571-2.275 49.612 49.612 0 0 1-6.634-2.83 55.792 55.792 0 0 1-6.254-3.768 63.068 63.068 0 0 1-3.009-2.215 82.399 82.399 0 0 1-8.683-7.925l-.095.119c-1.255-1.303-2.487-2.69-3.731-4.11-.154-.167-.296-.356-.45-.534-.628-.722-1.256-1.445-1.884-2.215s-1.125-1.398-1.682-2.097-.888-1.101-1.338-1.682a184.467 184.467 0 0 1-6.053-8.292c-.7-.995-1.398-2.025-2.109-3.056-.379-.569-.77-1.184-1.185-1.73-.675-1.018-1.362-2.013-2.049-3.056l-.355-.545c-1.185-1.812-2.37-3.684-3.649-5.603q2.95-4.608 5.817-8.86c1.907-2.831 3.79-5.556 5.662-8.138s3.72-5.046 5.591-7.38 3.72-4.525 5.603-6.586q2.026-2.203 4.063-4.194c1.374-1.338 2.748-2.594 4.158-3.778s2.807-2.287 4.252-3.329a57.594 57.594 0 0 1 7.748-4.62c.331-.166.663-.367 1.006-.533l.226-.118c1.41-.652 2.843-1.185 4.3-1.73l.485-.201c.273-.083.557-.142.83-.237a44.943 44.943 0 0 1 3.34-.948l1.374-.343a60.798 60.798 0 0 1 4.738-.841l1.019-.119 1.042-.106c.711 0 1.434-.119 2.156-.154h3.128a42.431 42.431 0 0 1 4.572.26 48.011 48.011 0 0 1 6.93 1.35c1.54.427 3.08.925 4.596 1.505a48.724 48.724 0 0 1 4.525 1.955c1.493.722 2.961 1.516 4.407 2.369s2.866 1.8 4.24 2.784 2.725 2.049 4.028 3.174a58.459 58.459 0 0 1 8.837 9.477 59.73 59.73 0 0 1 2.914 4.312 51.067 51.067 0 0 1 5.318 11.916 47.38 47.38 0 0 1 1.185 5.165 45.567 45.567 0 0 1 .71 8.09c.072 35.964-16.062 52.122-52.227 52.122z"/></svg>

<!-- ending partial cdf_logo.html.haml -->
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://cd.foundation/">
What is CDF?
</a>
<a class="dropdown-item feature" href="https://jenkins-x.io/">
Jenkins X
</a>
<a class="dropdown-item feature" href="https://cloud.google.com/tekton/">
Tekton
</a>
<a class="dropdown-item feature" href="https://www.spinnaker.io/">
Spinnaker
</a>
</div>
</li>
</ul>
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" href="https://zbynek.github.io/jenkins.io/order-syntax/node">
Blog
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Documentation
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/doc">
Use Jenkins
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/doc/developer">
Extend Jenkins
</a>
<span class="dropdown-item">
<strong>
Use-cases
</strong>
</span>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/android">
&nbsp;-&nbsp;Android
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/c">
&nbsp;-&nbsp;C/C++
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/docker">
&nbsp;-&nbsp;Docker
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/embedded">
&nbsp;-&nbsp;Embedded
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/github">
&nbsp;-&nbsp;GitHub
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/java">
&nbsp;-&nbsp;Java
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/php">
&nbsp;-&nbsp;PHP
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/pipeline">
&nbsp;-&nbsp;Continuous Delivery
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/python">
&nbsp;-&nbsp;Python
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/solutions/ruby">
&nbsp;-&nbsp;Ruby
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link" href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Community
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/participate">
Overview
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/chat" title="Chat with the rest of the Jenkins community on IRC">
Chat
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/jam">
Meet
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/events">
Events
</a>
<a class="dropdown-item feature" href="https://issues.jenkins-ci.org/">
Issue Tracker
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/mailing-lists" title="Browse Jenkins mailing list archives and/or subscribe to lists">
Mailing Lists
</a>
<a class="dropdown-item feature" href="https://wiki.jenkins.io/">
Wiki
</a>
<a class="dropdown-item feature" href="https://accounts.jenkins.io/" title="Create/manage your account for accessing wiki, issue tracker, etc">
Account Management
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/">
<strong>
Special Interest Groups
</strong>
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/advocacy-and-outreach/">
&nbsp;-&nbsp;Advocacy and Outreach
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/chinese-localization/">
&nbsp;-&nbsp;Chinese Localization
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/cloud-native/">
&nbsp;-&nbsp;Cloud Native
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/docs/">
&nbsp;-&nbsp;Documentation
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/gsoc/">
&nbsp;-&nbsp;Google Summer of Code
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/hw-and-eda/">
&nbsp;-&nbsp;Hardware and EDA
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/pipeline-authoring/">
&nbsp;-&nbsp;Pipeline Authoring
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/sigs/platform/">
&nbsp;-&nbsp;Platform
</a>
</div>
</li>
<li class="dropdown nav-item">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
Subprojects
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/">
Overview
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/blueocean/">
Blue Ocean
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/evergreen/">
Evergreen
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/gsoc/">
Google Summer of Code in Jenkins
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/infrastructure/">
Infrastructure
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/jam/">
Jenkins Area Meetups
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/jcasc/">
Jenkins Configuration as Code
</a>
<a class="dropdown-item feature" href="https://zbynek.github.io/jenkins.io/order-syntax/projects/remoting/">
Jenkins Remoting
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
About
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/security">
Security
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/press">
Press
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/awards">
Awards
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/project/conduct">
Conduct
</a>
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/artwork">
Artwork
</a>
</div>
</li>
<li class="nav-item dropdown">
<!-- starting partial dropdown.html.haml -->
<button aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown">
English
</button>

<!-- ending partial dropdown.html.haml -->
<div class="dropdown-menu">
<a class="dropdown-item" href="https://zbynek.github.io/jenkins.io/order-syntax/zh">
中文 Chinese
</a>
</div>
</li>
<li class="nav-item">
<a class="nav-link btn btn-outline-secondary" href="https://zbynek.github.io/jenkins.io/order-syntax/download">
Download
</a>
</li>
</ul>
</div>
</nav>
<!-- Spacing to make the fixed-top sticky navbar not occlude any content below it -->
<div class="pt-4">
&nbsp;
</div>

<!-- ending partial toptoolbar.html.haml -->
<script>
  $(function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>
<div class="container">
<div class="row body">
<div class="col-lg-3">
<div class="sidebar-nav tour">
<p>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc" class="">Jenkins User Documentation Home</a>
</p>
<h4>
Guided Tour
</h4>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/getting-started" class="">Getting started</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/hello-world" class="">Creating your first Pipeline</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/running-multiple-steps" class="">Running multiple steps</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/agents" class="">Defining execution environments</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/environment" class="">Using environment variables</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/tests-and-artifacts" class="">Recording test results and artifacts</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/post" class="">Cleaning up and notifications</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/tour/deployment" class="">Deployment</a>
</li>
</ul>
<h4>
Tutorials
</h4>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials" class="">Overview</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-java-app-with-maven" class="">Build a Java app with Maven</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-node-js-and-react-app-with-npm" class="">Build a Node.js and React app with npm</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-python-app-with-pyinstaller" class="">Build a Python app with PyInstaller</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-labview-app" class="">Build a LabVIEW app</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/create-a-pipeline-in-blue-ocean" class="">Create a Pipeline in Blue Ocean</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/tutorials/build-a-multibranch-pipeline-project" class="active">End-to-End Multibranch Pipeline Project Creation</a>
</li>
</ul>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/getting-started" class="">User Handbook overview</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/installing" class="">Installing Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/using" class="">Using Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/pipeline" class="">Pipeline</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/blueocean" class="">Blue Ocean</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/managing" class="">Managing Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/system-administration" class="">System Administration</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/scaling" class="">Scaling Jenkins</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/appendix" class="">Appendix</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/glossary" class="">Glossary</a>
</li>
</ul>
<h4>
Resources
</h4>
<ul>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/book/pipeline/syntax" class="">Pipeline Syntax reference</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/pipeline/steps" class="">Pipeline Steps reference</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc/upgrade-guide" class="">LTS Upgrade Guide</a>
</li>
</ul>
<h5>
Recent Tutorial Blog Posts
</h5>
<ul>
<li>
<a href="/blog/2017/11/27/tutorials-in-the-jenkins-user-documentation/">
Introducing Tutorials in the Jenkins User Documentation
</a>
</li>
<li>
<a href="/blog/2017/05/18/pipeline-dev-tools/">
Pipeline Development Tools
</a>
</li>
<li>
<a href="/blog/2017/04/12/welcome-to-blue-ocean-dashboard/">
Getting Started with the Blue Ocean Dashboard
</a>
</li>
</ul>
<div class="small">
<a href="/node/tags/tutorial">
View all tutorial blog posts
</a>
</div>
<p></p>
</div>
</div>
<div class="col-lg-9">
<h1>
End-to-End Multibranch Pipeline Project Creation
</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#run-jenkins-in-docker">Run Jenkins in Docker</a>
<ul class="sectlevel3">
<li><a href="#on-macos-and-linux">On macOS and Linux</a></li>
<li><a href="#on-windows">On Windows</a></li>
<li><a href="#accessing-the-jenkinsblue-ocean-docker-container">Accessing the Jenkins/Blue Ocean Docker container</a></li>
<li><a href="#setup-wizard">Setup wizard</a></li>
<li><a href="#stopping-and-restarting-jenkins">Stopping and restarting Jenkins</a></li>
</ul>
</li>
<li><a href="#fork-sample-repository">Fork and clone the sample repository on GitHub</a></li>
<li><a href="#create-development-and-production-branches-in-your-repository">Create development and production branches in your repository</a></li>
<li><a href="#create-your-pipeline-project-in-blue-ocean">Create your Pipeline project in Blue Ocean</a></li>
<li><a href="#create-your-initial-pipeline-as-a-jenkinsfile-with-build-and-test-stages">Create your initial Pipeline as a Jenkinsfile with build and test stages</a></li>
<li><a href="#add-deliver-and-deploy-stages-to-your-pipeline">Add deliver and deploy stages to your Pipeline</a></li>
<li><a href="#pull-your-updated-jenkinsfile-into-the-other-repository-branches">Pull your updated Jenkinsfile into the other repository branches</a></li>
<li><a href="#run-your-pipeline-on-the-development-branch">Run your Pipeline on the development branch</a></li>
<li><a href="#run-your-pipeline-on-the-production-branch">Run your Pipeline on the production branch</a></li>
<li><a href="#follow-up-optional">Follow up (optional)</a></li>
<li><a href="#clearing-the-app-from-your-browser">Clearing the app from your browser</a>
<ul class="sectlevel3">
<li><a href="#on-chrome">On Chrome</a></li>
<li><a href="#on-firefox">On Firefox</a></li>
</ul>
</li>
<li><a href="#wrapping-up">Wrapping up</a></li>
</ul>
</div>
<div class="paragraph">
<p>This tutorial shows you how to use Jenkins to orchestrate building and testing
a simple <a href="https://nodejs.org/en/">Node.js</a> and <a href="https://reactjs.org/">React</a>
application with the <a href="https://www.npmjs.com/">Node Package Manager (npm)</a>, <em>as
well as</em> deliver different outcomes for development and production purposes.</p>
</div>
<div class="paragraph">
<p>Before starting this tutorial, it is recommended that you run through at least
one of the initial set of <a href="../#introductory-tutorials">Introductory
tutorials</a> from the <a href="..">Tutorials overview</a> page first to familiarize
yourself with CI/CD concepts (relevant to a technology stack you&#8217;re most
familiar with), how these concepts are implemented in Jenkins and the
fundamentals of Jenkins Pipelines.</p>
</div>
<div class="paragraph">
<p>In this tutorial, you&#8217;ll use the same application that the
<a href="../build-a-node-js-and-react-app-with-npm">Build a Node.js and React app
with npm</a> tutorial is based on. Therefore, you&#8217;ll be building and testing the
same application but this time, its delivery will be different depending on the
Git branch that Jenkins builds from. That is, the branch being built determines
which delivery stage of your Pipeline is executed.</p>
</div>
<div class="paragraph">
<p><strong>Duration:</strong> This tutorial takes 30-50 minutes to complete (assuming you&#8217;ve
already met the <a href="#prerequisites">Prerequisites</a> below). The exact duration will
depend on the speed of your machine and whether or not you&#8217;ve already
<a href="#run-jenkins-in-docker">run Jenkins in Docker</a> from <a href="..">another tutorial</a>.</p>
</div>
<div class="paragraph">
<p>You can stop this tutorial at any point in time and continue from where you left
off.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ve already run though <a href="..">another tutorial</a>, you can skip the
<a href="#prerequisites">Prerequisites</a> and <a href="#run-jenkins-in-docker">Run Jenkins in
Docker</a> sections below and proceed on to <a href="#fork-sample-repository">forking the
sample repository</a>. (Just ensure you have
<a href="https://git-scm.com/downloads">Git</a> installed locally.) If you need to
restart Jenkins, simply follow the restart instructions in
<a href="#stopping-and-restarting-jenkins">Stopping and restarting Jenkins</a> and then
proceed on.</p>
</div>
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>For this tutorial, you will require:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A macOS, Linux or Windows machine with:</p>
<div class="ulist">
<ul>
<li>
<p>256 MB of RAM, although more than 512MB is recommended.</p>
</li>
<li>
<p>10 GB of drive space for Jenkins and your Docker images and containers.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The following software installed:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.docker.com/">Docker</a> - Read more about installing Docker in the
<a href="/doc/book/installing/#installing-docker">Installing Docker</a> section of
the <a href="/doc/book/installing/">Installing Jenkins</a> page.<br>
<strong>Note:</strong> If you use Linux, this tutorial assumes that you are not running
Docker commands as the root user, but instead with a single user account that
also has access to the other tools used throughout this tutorial.</p>
</li>
<li>
<p><a href="https://git-scm.com/downloads">Git</a> and optionally
<a href="https://desktop.github.com/">GitHub Desktop</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="run-jenkins-in-docker"><a class="anchor" href="#run-jenkins-in-docker"></a>Run Jenkins in Docker</h3>
<div class="paragraph">
<p>In this tutorial, you&#8217;ll be running Jenkins as a Docker container from the
<a href="https://hub.docker.com/r/jenkinsci/blueocean/"><code>jenkinsci/blueocean</code></a> Docker
image.</p>
</div>
<div class="paragraph">
<p>To run Jenkins in Docker, follow the relevant instructions below for either
<a href="#on-macos-and-linux">macOS and Linux</a> or <a href="#on-windows">Windows</a>.</p>
</div>
<div class="paragraph">
<p>You can read more about Docker container and image concepts in the
<a href="../../book/installing#docker">Docker</a> and
<a href="../../book/installing#downloading-and-running-jenkins-in-docker">Downloading and running Jenkins in Docker</a>
sections of the <a href="../../book/installing">Installing Jenkins</a> page.</p>
</div>
<div class="sect3">
<h4 id="on-macos-and-linux"><a class="anchor" href="#on-macos-and-linux"></a>On macOS and Linux</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up a terminal window.</p>
</li>
<li>
<p>Run the <code>jenkinsci/blueocean</code> image as a container in Docker using the
following
<a href="https://docs.docker.com/engine/reference/commandline/run/"><code>docker run</code></a>
command (bearing in mind that this command automatically downloads the image
if this hasn&#8217;t been done):</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>docker run \
  --rm \
  -u root \
  -p 8080:8080 \
  -v jenkins-data:/var/jenkins_home \ <i class="conum" data-value="1"></i><b>(1)</b>
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v "$HOME":/home \ <i class="conum" data-value="2"></i><b>(2)</b>
  jenkinsci/blueocean</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Maps the <code>/var/jenkins_home</code> directory in the container to the Docker
<a href="https://docs.docker.com/engine/admin/volumes/volumes/">volume</a> with the name
<code>jenkins-data</code>. If this volume does not exist, then this <code>docker run</code> command
will automatically create the volume for you.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Maps the <code>$HOME</code> directory on the host (i.e. your local) machine (usually
the <code>/Users/&lt;your-username&gt;</code> directory) to the <code>/home</code> directory in the
container.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If copying and pasting the command snippet above doesn&#8217;t work, try
copying and pasting this annotation-free version here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>docker run \
  --rm \
  -u root \
  -p 8080:8080 \
  -v jenkins-data:/var/jenkins_home \
  -v /var/run/docker.sock:/var/run/docker.sock \
  -v "$HOME":/home \
  jenkinsci/blueocean</code></pre>
</div>
</div>
</li>
<li>
<p>Proceed to the <a href="#setup-wizard">Setup wizard</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="on-windows"><a class="anchor" href="#on-windows"></a>On Windows</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up a command prompt window.</p>
</li>
<li>
<p>Run the <code>jenkinsci/blueocean</code> image as a container in Docker using the
following
<a href="https://docs.docker.com/engine/reference/commandline/run/"><code>docker run</code></a>
command (bearing in mind that this command automatically downloads the image
if this hasn&#8217;t been done):</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">docker run ^
  --rm ^
  -u root ^
  -p 8080:8080 ^
  -v jenkins-data:/var/jenkins_home ^
  -v /var/run/docker.sock:/var/run/docker.sock ^
  -v "%HOMEDRIVE%%HOMEPATH%":/home ^
  jenkinsci/blueocean</pre>
</div>
</div>
<div class="paragraph">
<p>For an explanation of these options, refer to the <a href="#on-macos-and-linux">macOS
and Linux</a> instructions above.</p>
</div>
</li>
<li>
<p>Proceed to the <a href="#setup-wizard">Setup wizard</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="accessing-the-jenkinsblue-ocean-docker-container"><a class="anchor" href="#accessing-the-jenkinsblue-ocean-docker-container"></a>Accessing the Jenkins/Blue Ocean Docker container</h4>
<div class="paragraph">
<p>If you have some experience with Docker and you wish or need to access the
Jenkins/Blue Ocean Docker container through a terminal/command prompt using the
<a href="https://docs.docker.com/engine/reference/commandline/exec/"><code>docker exec</code></a>
command, you can add an option like <code>--name jenkins-tutorials</code> (with the
<a href="https://docs.docker.com/engine/reference/commandline/run/"><code>docker run</code></a>
above), which would give the Jenkins/Blue Ocean Docker container the name
"jenkins-tutorials".</p>
</div>
<div class="paragraph">
<p>This means you could access the Jenkins/Blue Ocean container (through a separate
terminal/command prompt window) with a <code>docker exec</code> command like:</p>
</div>
<div class="paragraph">
<p><code>docker exec -it jenkins-tutorials bash</code></p>
</div>
</div>
<div class="sect3">
<h4 id="setup-wizard"><a class="anchor" href="#setup-wizard"></a>Setup wizard</h4>
<div class="paragraph">
<p>Before you can access Jenkins, there are a few quick "one-off" steps you&#8217;ll need
to perform.</p>
</div>
<div class="sect4">
<h5 id="unlocking-jenkins"><a class="anchor" href="#unlocking-jenkins"></a>Unlocking Jenkins</h5>
<div class="paragraph">
<p>When you first access a new Jenkins instance, you are asked to unlock it using
an automatically-generated password.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>After the 2 sets of asterisks appear in the terminal/command prompt window,
browse to <code>http://localhost:8080</code> and wait until the <strong>Unlock Jenkins</strong> page
appears.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/setup-jenkins-01-unlock-jenkins-page.jpg" alt="Unlock Jenkins page" width="100%"></span></p>
</div>
</li>
<li>
<p>From your terminal/command prompt window again, copy the
automatically-generated alphanumeric password (between the 2 sets of
asterisks).</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/setup-jenkins-02-copying-initial-admin-password.png" alt="Copying initial admin password" width="100%"></span></p>
</div>
</li>
<li>
<p>On the <strong>Unlock Jenkins</strong> page, paste this password into the <strong>Administrator
password</strong> field and click <strong>Continue</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="customizing-jenkins-with-plugins"><a class="anchor" href="#customizing-jenkins-with-plugins"></a>Customizing Jenkins with plugins</h5>
<div class="paragraph">
<p>After <a href="#unlocking-jenkins">unlocking Jenkins</a>, the <strong>Customize Jenkins</strong> page
appears.</p>
</div>
<div class="paragraph">
<p>On this page, click <strong>Install suggested plugins</strong>.</p>
</div>
<div class="paragraph">
<p>The setup wizard shows the progression of Jenkins being configured and the
suggested plugins being installed. This process may take a few minutes.</p>
</div>
</div>
<div class="sect4">
<h5 id="creating-the-first-administrator-user"><a class="anchor" href="#creating-the-first-administrator-user"></a>Creating the first administrator user</h5>
<div class="paragraph">
<p>Finally, Jenkins asks you to create your first administrator user.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When the <strong>Create First Admin User</strong> page appears, specify your details in the
respective fields and click <strong>Save and Finish</strong>.</p>
</li>
<li>
<p>When the <strong>Jenkins is ready</strong> page appears, click <strong>Start using Jenkins</strong>.<br>
<strong>Notes:</strong></p>
<div class="ulist">
<ul>
<li>
<p>This page may indicate <strong>Jenkins is almost ready!</strong> instead and if so, click
<strong>Restart</strong>.</p>
</li>
<li>
<p>If the page doesn&#8217;t automatically refresh after a minute, use your web browser
to refresh the page manually.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If required, log in to Jenkins with the credentials of the user you just
created and you&#8217;re ready to start using Jenkins!</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="stopping-and-restarting-jenkins"><a class="anchor" href="#stopping-and-restarting-jenkins"></a>Stopping and restarting Jenkins</h4>
<div class="paragraph">
<p>Throughout the remainder of this tutorial, you can stop the Jenkins/Blue Ocean
Docker container by typing <code>Ctrl-C</code> in the terminal/command prompt window from
which you ran the <code>docker run &#8230;&#8203;</code> command <a href="#run-jenkins-in-docker">above</a>.</p>
</div>
<div class="paragraph">
<p>To restart the Jenkins/Blue Ocean Docker container:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the same <code>docker run &#8230;&#8203;</code> command you ran for <a href="#on-macos-and-linux">macOS,
Linux</a> or <a href="#on-windows">Windows</a> above.<br>
<strong>Note:</strong> This process also updates the <code>jenkinsci/blueocean</code> Docker image, if
an updated one is available.</p>
</li>
<li>
<p>Browse to <code>http://localhost:8080</code>.</p>
</li>
<li>
<p>Wait until the log in page appears and log in.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fork-sample-repository"><a class="anchor" href="#fork-sample-repository"></a>Fork and clone the sample repository on GitHub</h3>
<div class="paragraph">
<p>Obtain the simple "Welcome to React" Node.js and React application from GitHub,
by forking the sample repository of the application&#8217;s source code into your own
GitHub account and then cloning this fork locally.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you are signed in to your GitHub account. If you don&#8217;t yet have a
GitHub account, sign up for a free one on the <a href="https://github.com/">GitHub
website</a>.</p>
</li>
<li>
<p>Fork the
<a href="https://github.com/jenkins-docs/building-a-multibranch-pipeline-project"><code>building-a-multibranch-pipeline-project</code></a>
on GitHub into your local GitHub account. If you need help with this process,
refer to the <a href="https://help.github.com/articles/fork-a-repo/">Fork A Repo</a>
documentation on the GitHub website for more information.</p>
</li>
<li>
<p>Clone your forked <code>building-a-multibranch-pipeline-project</code> repository (on
GitHub) locally to your machine. To begin this process, do either of the
following (where <code>&lt;your-username&gt;</code> is the name of your user account on your
operating system):</p>
<div class="ulist">
<ul>
<li>
<p>If you have the GitHub Desktop app installed on your machine:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In GitHub, click the green <strong>Clone or download</strong> button on your forked
repository, then <strong>Open in Desktop</strong>.</p>
</li>
<li>
<p>In GitHub Desktop, before clicking <strong>Clone</strong> on the <strong>Clone a Repository</strong> dialog
box, ensure <strong>Local Path</strong> for:</p>
<div class="ulist">
<ul>
<li>
<p>macOS is <code>/Users/&lt;your-username&gt;/Documents/GitHub/building-a-multibranch-pipeline-project</code></p>
</li>
<li>
<p>Linux is <code>/home/&lt;your-username&gt;/GitHub/building-a-multibranch-pipeline-project</code></p>
</li>
<li>
<p>Windows is <code>C:\Users\&lt;your-username&gt;\Documents\GitHub\building-a-multibranch-pipeline-project</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Otherwise:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open up a terminal/command line prompt and <code>cd</code> to the appropriate directory
on:</p>
<div class="ulist">
<ul>
<li>
<p>macOS - <code>/Users/&lt;your-username&gt;/Documents/GitHub/</code></p>
</li>
<li>
<p>Linux - <code>/home/&lt;your-username&gt;/GitHub/</code></p>
</li>
<li>
<p>Windows - <code>C:\Users\&lt;your-username&gt;\Documents\GitHub\</code> (although use a Git
bash command line window as opposed to the usual Microsoft command prompt)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Run the following command to continue/complete cloning your forked repo:<br>
<code>git clone https://github.com/YOUR-GITHUB-ACCOUNT-NAME/building-a-multibranch-pipeline-project</code><br>
where <code>YOUR-GITHUB-ACCOUNT-NAME</code> is the name of your GitHub account.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-development-and-production-branches-in-your-repository"><a class="anchor" href="#create-development-and-production-branches-in-your-repository"></a>Create development and production branches in your repository</h3>
<div class="paragraph">
<p>Before creating your Pipeline project in Jenkins, create "development" and
"production" branches of your locally cloned Git repository. You&#8217;ll be creating
a single Jenkinsfile (initially in the <code>master</code> branch, which you&#8217;ll pull into
the other branches) whose stages will be selectively executed based on the
branch that Jenkins is building from.</p>
</div>
<div class="paragraph">
<p>Within the <code>building-a-multibranch-pipeline-project</code> directory (i.e. your local
clone of the sample repository):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following commands to create
these branches (from the contents of the <code>master</code> branch):</p>
<div class="ulist">
<ul>
<li>
<p><code>git branch development</code><br>
and</p>
</li>
<li>
<p><code>git branch production</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Check that these branches now exist by running the command <code>git branch</code>, which
should give you:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="bash">  development
* master
  production</code></pre>
</div>
</div>
</li>
<li>
<p>If the asterisk (indicating the current branch) does not appear next to
<code>master</code>, run the command <code>git checkout master</code> to ensure that <code>master</code> is the
current branch.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-your-pipeline-project-in-blue-ocean"><a class="anchor" href="#create-your-pipeline-project-in-blue-ocean"></a>Create your Pipeline project in Blue Ocean</h3>
<div class="paragraph">
<p>Whenever you create <em>any</em> Pipeline project in Blue Ocean, Jenkins actually
creates this as a multibranch Pipeline project behind the scenes. This becomes
apparent if you were to access Jenkins&#8217;s classic interface after creating a
Pipeline project in Blue Ocean; you&#8217;ll see that Jenkins will have created your
project as a "Multibranch Pipeline" project.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to Jenkins and ensure you have accessed the Blue Ocean interface. To
do this, make sure you:</p>
<div class="ulist">
<ul>
<li>
<p>have browsed to <code>http://localhost:8080/blue</code> and are logged in<br>
or</p>
</li>
<li>
<p>have browsed to <code>http://localhost:8080/</code>, are logged in and have clicked <strong>Open
Blue Ocean</strong> on the left.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>Welcome to Jenkins</strong> box at the center of the Blue Ocean interface,
click <strong>Create a new Pipeline</strong> to begin the Pipeline creation wizard.<br>
<strong>Note:</strong> If you don&#8217;t see this box, click <strong>New Pipeline</strong> at the top right.</p>
</li>
<li>
<p>In <strong>Where do you store your code?</strong>, click <strong>Git</strong> (<em>not</em> <strong>GitHub</strong>).</p>
</li>
<li>
<p>In the <strong>Repository URL</strong> field (within <strong>Connect to a Git repository</strong>), specify
the directory path of your locally cloned repository
<a href="#fork-sample-repository">above</a>, which is from your
user account/home directory on your host machine, mapped to the <code>/home</code>
directory of the Jenkins container - i.e.</p>
<div class="ulist">
<ul>
<li>
<p>For macOS - <code>/home/Documents/GitHub/building-a-multibranch-pipeline-project</code></p>
</li>
<li>
<p>For Linux - <code>/home/GitHub/building-a-multibranch-pipeline-project</code></p>
</li>
<li>
<p>For Windows - <code>/home/Documents/GitHub/building-a-multibranch-pipeline-project</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong> to save your new Pipeline project.<br>
Blue Ocean detects the presence of the <code>Jenkinsfile</code> "Pipeline stub" in each
branch and proceeds to run each Pipeline against its respective branch, whose
build results are shown on the <strong>Activity</strong> page of the main Blue Ocean
interface.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-01-main-blueocean-interface.png" alt="Main Blue Ocean interface" width="100%"></span></p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Pipeline stub consists of the basic requirements for a valid Pipeline - i.e.
an <a href="/doc/book/pipeline/syntax#agent"><code>agent</code></a> and a
<a href="/doc/book/pipeline/syntax#stages"><code>stages</code></a> section, as well as a
<a href="/doc/book/pipeline/syntax#stage"><code>stage</code></a> directive.</p>
</div>
<div class="paragraph">
<p>The reason why the <code>building-a-multibranch-pipeline-project</code> repository includes
a <code>Jenkinsfile</code> Pipeline stub is that its presence in a branch makes Blue Ocean
detect that there&#8217;s something to build (i.e. the <code>Jenkinsfile</code>) immediately
after creating the Pipeline project in Blue Ocean, which in turn makes these
branches accessible through the Blue Ocean interface.</p>
</div>
<div class="paragraph">
<p>If you created a Pipeline project in Blue Ocean but didn&#8217;t have a Jenkinsfile in
one or more of your repository&#8217;s branches, then to access the branches in Blue
Ocean after subsequently pulling in/adding a <code>Jenkinsfile</code> to these branches,
either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <strong>Scan Multibranch Pipeline Now</strong> feature in the Multibranch Pipeline
project (accessible through Jenkins&#8217;s classic interface),<br>
or</p>
</li>
<li>
<p>Implement webhooks into your Git repository.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="create-your-initial-pipeline-as-a-jenkinsfile-with-build-and-test-stages"><a class="anchor" href="#create-your-initial-pipeline-as-a-jenkinsfile-with-build-and-test-stages"></a>Create your initial Pipeline as a Jenkinsfile with build and test stages</h3>
<div class="paragraph">
<p>You&#8217;re now ready to create the Pipeline that will automate building your Node.js
and React application in Jenkins. Your Pipeline will be created as a
<code>Jenkinsfile</code>, which will be committed to the <code>master</code> branch of your locally
cloned Git repository (<code>building-a-multibranch-pipeline-project</code>).</p>
</div>
<div class="paragraph">
<p>First, create an initial Pipeline to download a Node Docker image and run it as
a Docker container that will build your simple Node.js and React application.
Also add a "Build" stage to the Pipeline to begin orchestrating this whole
process and a "Test" stage to check that the application renders satisfactorily.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using your favorite text editor or IDE, open the existing <code>Jenkinsfile</code> at the
root of your local <code>building-a-multibranch-pipeline-project</code> Git repository
and <em>clear</em> its contents.<br>
<strong>Note:</strong> Be sure you are performing this step on the <code>master</code> branch of your
repository.</p>
</li>
<li>
<p>Copy the following Declarative Pipeline code and paste it into your empty
<code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">pipeline {
    agent {
        docker {
            image <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node:6-alpine</span><span style="color:#710">'</span></span>
            args <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">-p 3000:3000 -p 5000:5000</span><span style="color:#710">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
        }
    }
    environment {
        CI = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">true</span><span style="color:#710">'</span></span>
    }
    stages {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Build</span><span style="color:#710">'</span></span>) {
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">npm install</span><span style="color:#710">'</span></span>
            }
        }
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Test</span><span style="color:#710">'</span></span>) {
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/test.sh</span><span style="color:#710">'</span></span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This <code>args</code> parameter makes the Node container (temporarily) accessible
through ports 3000 and 5000. The significance of this is explained in the
<code>jenkins/scripts/deliver-for-deployment.sh</code> and
<code>jenkins/scripts/deploy-for-production.sh</code> files of your cloned repository, and
are covered in subsequent sections of this tutorial.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Note:</strong> For an explanation of the other components of this <code>Jenkinsfile</code>, refer
to the annotations of the Declarative Pipeline in the
<a href="../build-a-node-js-and-react-app-with-npm/#create-your-initial-pipeline-as-a-jenkinsfile"><code>Create
your initial Pipeline&#8230;&#8203;''</a> and
<a href="../build-a-node-js-and-react-app-with-npm/#add-a-test-stage-to-your-pipeline"></code>Add
a test stage&#8230;&#8203;''</a> sections of the
<a href="../build-a-node-js-and-react-app-with-npm/">Build a Node.js and React app
with npm</a> tutorial.</p>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>building-a-multibranch-pipeline-project</code> Git repository. E.g. Within the
<code>building-a-multibranch-pipeline-project</code> directory, run the commands:<br>
<code>git stage .</code><br>
then<br>
<code>git commit -m "Add initial Jenkinsfile with 'Test' stage"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and ensure you&#8217;ve accessed
Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>Click <strong>Branches</strong> at the top right to access the list of your Pipeline
project&#8217;s branches.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-11-branches-page.png" alt="Branches page" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the run icon
<span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-12-run-icon.png" alt="Run icon" width="3%"></span>
of the <code>master</code> branch of your Pipeline project, then quickly click the <strong>OPEN</strong>
link that appears briefly at the lower-right to see Jenkins building the
<code>master</code> branch with the amended <code>Jenkinsfile</code>. If you weren&#8217;t able to click
the <strong>OPEN</strong> link, click the <em>top</em> row on the Blue Ocean <strong>Activity</strong> page to
access this feature.<br>
Within a few minutes, the Blue Ocean interface turns green if Jenkins built
your Node.js and React application successfully from your <code>master</code> branch.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-13-build-and-test-stages-run-successfully-with-output.png" alt="Build and test stages run successfully with output" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the <strong>Activity</strong> page of the Blue
Ocean interface.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="add-deliver-and-deploy-stages-to-your-pipeline"><a class="anchor" href="#add-deliver-and-deploy-stages-to-your-pipeline"></a>Add deliver and deploy stages to your Pipeline</h3>
<div class="paragraph">
<p>Next, add "Deliver for development" and "Deploy for production" stages to your
Pipeline, which Jenkins will selectively execute based on the branch that Jenkins is building from.</p>
</div>
<div class="paragraph">
<p>This takes the "Pipeline-as-Code" concept to a new level, in which a single
<code>Jenkinsfile</code> describes your project&#8217;s entire build, test, delivery and
deployment processes in Jenkins for each branch of your repository. Read more
about Pipeline and what a Jenkinsfile is in the
<a href="/doc/book/pipeline">Pipeline</a> and <a href="/doc/book/pipeline/jenkinsfile">Using
a Jenkinsfile</a> sections of the User Handbook.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to your text editor/IDE and ensure your <code>Jenkinsfile</code> is open.</p>
</li>
<li>
<p>Copy and paste the following Declarative Pipeline syntax immediately under the
<code>Test</code> stage of your <code>Jenkinsfile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Deliver for development</span><span style="color:#710">'</span></span>) {
            when {
                branch <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">development</span><span style="color:#710">'</span></span>
            }
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/deliver-for-development.sh</span><span style="color:#710">'</span></span>
                input <span style="color:#606">message</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Finished using the web site? (Click &quot;Proceed&quot; to continue)</span><span style="color:#710">'</span></span>
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/kill.sh</span><span style="color:#710">'</span></span>
            }
        }
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Deploy for production</span><span style="color:#710">'</span></span>) {
            when {
                branch <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">production</span><span style="color:#710">'</span></span>
            }
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/deploy-for-production.sh</span><span style="color:#710">'</span></span>
                input <span style="color:#606">message</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Finished using the web site? (Click &quot;Proceed&quot; to continue)</span><span style="color:#710">'</span></span>
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/kill.sh</span><span style="color:#710">'</span></span>
            }
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>so that you end up with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">pipeline {
    agent {
        docker {
            image <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node:6-alpine</span><span style="color:#710">'</span></span>
            args <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">-p 3000:3000 -p 5000:5000</span><span style="color:#710">'</span></span>
        }
    }
    environment {
        CI = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">true</span><span style="color:#710">'</span></span>
    }
    stages {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Build</span><span style="color:#710">'</span></span>) {
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">npm install</span><span style="color:#710">'</span></span>
            }
        }
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Test</span><span style="color:#710">'</span></span>) {
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/test.sh</span><span style="color:#710">'</span></span>
            }
        }
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Deliver for development</span><span style="color:#710">'</span></span>) {
            when {
                branch <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">development</span><span style="color:#710">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
            }
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/deliver-for-development.sh</span><span style="color:#710">'</span></span>
                input <span style="color:#606">message</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Finished using the web site? (Click &quot;Proceed&quot; to continue)</span><span style="color:#710">'</span></span>
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/kill.sh</span><span style="color:#710">'</span></span>
            }
        }
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Deploy for production</span><span style="color:#710">'</span></span>) {
            when {
                branch <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">production</span><span style="color:#710">'</span></span>  <i class="conum" data-value="1"></i><b>(1)</b>
            }
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/deploy-for-production.sh</span><span style="color:#710">'</span></span>
                input <span style="color:#606">message</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Finished using the web site? (Click &quot;Proceed&quot; to continue)</span><span style="color:#710">'</span></span>
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./jenkins/scripts/kill.sh</span><span style="color:#710">'</span></span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>These <a href="/doc/book/pipeline/syntax#when"><code>when</code></a> directives (along with
their <code>branch</code> conditions) determine whether or not the
<a href="/doc/book/pipeline/syntax#stage"><code>stages</code></a> (containing these <code>when</code>
directives) should be executed. If a <code>branch</code> condition&#8217;s value (i.e. pattern)
matches the name of the branch that Jenkins is running the build from, then the
<code>stage</code> that contains this <code>when</code> and <code>branch</code> construct will be executed.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>For an explanation of the <code>input message</code> steps, refer to annotation <strong>4</strong> of
the Declarative Pipeline at the
<a href="../build-a-node-js-and-react-app-with-npm/#add-a-final-deliver-stage-to-your-pipeline">``Add
a final deliver stage&#8230;&#8203;'' section of the Build a Node.js and React app</a>
tutorial.</p>
</li>
<li>
<p>For an explanation of the <code>deliver-for-development.sh</code>,
<code>deploy-for-production.sh</code> and <code>kill.sh</code> script steps, refer to the contents
of these files located in the <code>jenkins/scripts</code> directory from the root of the
<code>building-a-multibranch-pipeline-project</code> respository.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Save your edited <code>Jenkinsfile</code> and commit it to your local
<code>building-a-multibranch-pipeline-project</code> Git repository. E.g. Within the
<code>building-a-multibranch-pipeline-project</code> directory, run the commands:<br>
<code>git stage .</code><br>
then<br>
<code>git commit -m "Add 'Deliver&#8230;&#8203;' and 'Deploy&#8230;&#8203;' stages"</code></p>
</li>
<li>
<p>Go back to Jenkins again, log in again if necessary and ensure you&#8217;ve accessed
Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>Click <strong>Branches</strong> at the top right to access the list of your Pipeline
project&#8217;s branches.</p>
</li>
<li>
<p>Click the run icon
<span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-12-run-icon.png" alt="Run icon" width="3%"></span>
of the <code>master</code> branch of your Pipeline project, then quickly click the <strong>OPEN</strong>
link that appears briefly at the lower-right to see Jenkins building the
<code>master</code> branch with the amended <code>Jenkinsfile</code>. If you weren&#8217;t able to click
the <strong>OPEN</strong> link, click the <em>top</em> row on the Blue Ocean <strong>Activity</strong> page to
access this feature.<br>
Notice how Jenkins skips the last two stages you added, since the branch you
are running the build from (<code>master</code>) does not meet the <code>when</code> directives'
<code>branch</code> conditions in these stages.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-21-complete-pipeline-runs-successfully-on-master-branch.png" alt="Complete Pipeline runs successfully on the 'master' branch" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the <strong>Activity</strong> page of the Blue
Ocean interface.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="pull-your-updated-jenkinsfile-into-the-other-repository-branches"><a class="anchor" href="#pull-your-updated-jenkinsfile-into-the-other-repository-branches"></a>Pull your updated Jenkinsfile into the other repository branches</h3>
<div class="paragraph">
<p>Now that you have a completed <code>Jenkinsfile</code> to build your application in
Jenkins, you can pull this file from the <code>master</code> branch of your local
repository into its <code>development</code> and <code>production</code> branches.</p>
</div>
<div class="paragraph">
<p>Within your local repository&#8217;s <code>building-a-multibranch-pipeline-project</code>
directory:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following commands to pull changes from <code>master</code> to
<code>development</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>git checkout development</code><br>
and</p>
</li>
<li>
<p><code>git pull . master</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Also run the following commands to pull changes from <code>master</code> to <code>production</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>git checkout production</code><br>
and</p>
</li>
<li>
<p><code>git pull . master</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your <code>development</code> and <code>production</code> branches should now have all your
<code>Jenkinsfile</code> updates you made on the <code>master</code> branch.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="run-your-pipeline-on-the-development-branch"><a class="anchor" href="#run-your-pipeline-on-the-development-branch"></a>Run your Pipeline on the development branch</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go back to Jenkins again, log in again if necessary and ensure you&#8217;ve accessed
Jenkins&#8217;s Blue Ocean interface.</p>
</li>
<li>
<p>Click <strong>Branches</strong> at the top right to access the list of your Pipeline
project&#8217;s branches.</p>
</li>
<li>
<p>Click the run icon
<span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-12-run-icon.png" alt="Run icon" width="3%"></span>
of the <code>development</code> branch of your Pipeline project, then quickly click the
<strong>OPEN</strong> link that appears briefly at the lower-right to see Jenkins building
the <code>development</code> branch with the amended <code>Jenkinsfile</code>. If you weren&#8217;t able
to click the <strong>OPEN</strong> link, click the <em>top</em> row on the Blue Ocean <strong>Activity</strong>
page to access this feature.</p>
</li>
<li>
<p>Within a few minutes and when the build pauses, ensure you are viewing the
<strong>Deliver for development</strong> stage (click it if necessary), then click the top
green <strong>Shell Script</strong> step to expand its contents and scroll down until you see
the <code>http://localhost:3000</code> link.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-31-deliver-for-development-stage-opened.png" alt="Shell Script step 'Deliver for development' stage opened" width="100%"></span><br>
  <strong>Note:</strong> Since you are building the application on a different branch, the <code>npm
  install</code> step will require a few minutes for <code>npm</code> to download the many
  dependencies required to run your Node.js and React application (stored in a
  local <code>node_modules</code> directory within the Jenkins home directory). These
  dependencies are downloaded again because this Jenkins build would be the
  first time you are running your Pipeline project on the <code>development</code> branch
  and each branch has its own workspace directory (containing its own
  <code>node_modules</code> directory) within the Jenkins home directory.</p>
</div>
</li>
<li>
<p>Click the <code>http://localhost:3000</code> link to view your Node.js and React
application running in development mode (with the <code>npm start</code> command) in a
new web browser tab. You should see a page/site with the title <strong>Welcome to
React</strong> on it.</p>
</li>
<li>
<p>When you are finished viewing the page/site, click the <strong>Proceed</strong> button in
Blue Ocean to complete the Pipeline&#8217;s execution.<br>
The Blue Ocean interface turns green if Jenkins built your Node.js and React
application successfully from your <code>development</code> branch. Notice how the
<strong>Deliver for development</strong> stage was executed but the <strong>Deploy for production</strong>
stage was not.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-32-complete-pipeline-runs-successfully-on-development-branch.png" alt="Complete Pipeline runs successfully on the 'development' branch" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the <strong>Activity</strong> page of the Blue
Ocean interface.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="run-your-pipeline-on-the-production-branch"><a class="anchor" href="#run-your-pipeline-on-the-production-branch"></a>Run your Pipeline on the production branch</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Branches</strong> at the top right to access the list of your Pipeline
project&#8217;s branches.</p>
</li>
<li>
<p>Click the run icon
<span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-12-run-icon.png" alt="Run icon" width="3%"></span>
of the <code>production</code> branch of your Pipeline project, then quickly click the
<strong>OPEN</strong> link that appears briefly at the lower-right to see Jenkins building
the <code>production</code> branch with the amended <code>Jenkinsfile</code>. If you weren&#8217;t able to
click the <strong>OPEN</strong> link, click the <em>top</em> row on the Blue Ocean <strong>Activity</strong> page
to access this feature.</p>
</li>
<li>
<p>Within a few minutes and when the build pauses, ensure you are viewing the
<strong>Deploy for production</strong> stage (click it if necessary), then click the top
green <strong>Shell Script</strong> step to expand its contents and scroll down until you see
the <code>http://localhost:5000</code> link.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-41-deploy-for-production-stage-opened.png" alt="Shell Script step 'Deploy for production' stage opened" width="100%"></span><br></p>
</div>
</li>
<li>
<p>Click the <code>http://localhost:5000</code> link to view your Node.js and React
application in a new web browser tab. This will be running in production mode
from a production build of your source code (generated using the <code>npm run
build</code> command). Again, you should see a page/site with the title <strong>Welcome to
React</strong> on it. However, this time, the application&#8217;s contents are served by the
<a href="https://www.npmjs.com/package/serve">npm <code>serve</code> module</a> and are also
likely to continue running in the background in your browser.</p>
</li>
<li>
<p>When you are finished viewing the page/site, click the <strong>Proceed</strong> button in
Blue Ocean to complete the Pipeline&#8217;s execution.<br>
The Blue Ocean interface turns green if Jenkins built your Node.js and React
application successfully from your <code>production</code> branch. Notice how the
<strong>Deploy for production</strong> stage was executed but the <strong>Deliver for development</strong>
stage was skipped.</p>
<div class="paragraph boxshadow">
<p><span class="image"><img src="../../book/resources/tutorials/multibranch-pipeline-42-complete-pipeline-runs-successfully-on-production-branch.png" alt="Complete Pipeline runs successfully on the 'production' branch" width="100%"></span></p>
</div>
</li>
<li>
<p>Click the <strong>X</strong> at the top-right to return to the <strong>Activity</strong> page of the Blue
Ocean interface.<br>
<strong>Note:</strong> Since your browser is likely to continue running the application&#8217;s
content served by the npm <code>serve</code> module, your browser will still show the
content you viewed at <code>http://localhost:5000</code> long after Jenkins has killed
off the <code>serve</code> process. Read more about how to clear the application and its
content from your browser <a href="#clearing-the-app-from-your-browser">below</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="follow-up-optional"><a class="anchor" href="#follow-up-optional"></a>Follow up (optional)</h3>
<div class="paragraph">
<p>This section takes you through a simulated development workflow using
Jenkins, whereby changes made to your application (i.e. the <code>App.js</code> source
file) can be examined from the <code>development</code> branch before they are deployed to
production (from the <code>production</code> branch) via the <code>master</code> branch.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within your local repository&#8217;s <code>building-a-multibranch-pipeline-project</code>
directory, run the command <code>git checkout development</code> to change to the
<code>development</code> branch.</p>
</li>
<li>
<p>Go back to your text editor/IDE and open the <code>App.js</code> file in the <code>src</code>
directory of your local <code>building-a-multibranch-pipeline-project</code> Git
repository.</p>
</li>
<li>
<p>Copy and paste the following HTML syntax immediately under the <code>To get
started&#8230;&#8203;</code> line of your <code>App.js</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="html">          <span style="color:#070;font-weight:bold">&lt;br</span><span style="color:#070;font-weight:bold">/&gt;</span>
          This is a new line I added.</code></pre>
</div>
</div>
<div class="paragraph">
<p>so that you end up with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="javascript"><span style="color:#080;font-weight:bold">import</span> React, { Component } from <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">react</span><span style="color:#710">'</span></span>;
<span style="color:#080;font-weight:bold">import</span> logo from <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./logo.svg</span><span style="color:#710">'</span></span>;
<span style="color:#080;font-weight:bold">import</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">./App.css</span><span style="color:#710">'</span></span>;

<span style="color:#080;font-weight:bold">class</span> App <span style="color:#080;font-weight:bold">extends</span> Component {
  render() {
    <span style="color:#080;font-weight:bold">return</span> (
      <span style="color:#070;font-weight:bold">&lt;div</span> <span style="color:#b48">className</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">App</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;header</span> <span style="color:#b48">className</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">App-header</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
          <span style="color:#070;font-weight:bold">&lt;img</span> <span style="color:#b48">src</span>=<span style="color:#F00;background-color:#FAA">{</span><span style="color:#700">logo</span><span style="color:#F00;background-color:#FAA">}</span> <span style="color:#b48">className</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">App-logo</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">alt</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">logo</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
          <span style="color:#070;font-weight:bold">&lt;h1</span> <span style="color:#b48">className</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">App-title</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Welcome to React<span style="color:#070;font-weight:bold">&lt;/h1&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/header&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;p</span> <span style="color:#b48">className</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">App-intro</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
          To get started, edit <span style="color:#070;font-weight:bold">&lt;code&gt;</span>src/App.js<span style="color:#070;font-weight:bold">&lt;/code&gt;</span> and save to reload.
          <span style="color:#070;font-weight:bold">&lt;br</span><span style="color:#070;font-weight:bold">/&gt;</span>
          This is a new line I added.
        <span style="color:#070;font-weight:bold">&lt;/p&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;/div&gt;</span>
    );
  }
}

<span style="color:#080;font-weight:bold">export</span> <span style="color:#080;font-weight:bold">default</span> App;</code></pre>
</div>
</div>
</li>
<li>
<p>Save the edited <code>App.js</code> file and commit it to your local
<code>building-a-multibranch-pipeline-project</code> Git repository. E.g. Within the
<code>building-a-multibranch-pipeline-project</code> directory, run the commands:<br>
<code>git stage .</code><br>
then<br>
<code>git commit -m "Update 'App.js'"</code></p>
</li>
<li>
<p>Back in Blue Ocean, run your Pipeline on the <code>development</code> branch (as you did
<a href="#run-your-pipeline-on-the-development-branch">above</a>) and check the results
through <code>http://localhost:3000</code> to see your new line added.</p>
</li>
<li>
<p>Assuming you&#8217;re happy with the change, then within your local repository&#8217;s
<code>building-a-multibranch-pipeline-project</code> directory, run the following set of
commands to pull your change into the <code>production</code> branch (via the <code>master</code>
branch):</p>
<div class="ulist">
<ul>
<li>
<p><code>git checkout master</code><br>
and</p>
</li>
<li>
<p><code>git pull . development</code><br>
then</p>
</li>
<li>
<p><code>git checkout production</code><br>
and</p>
</li>
<li>
<p><code>git pull . master</code><br></p>
</li>
</ul>
</div>
</li>
<li>
<p>Back in Blue Ocean, run your Pipeline on the <code>production</code> branch this time (as
you did <a href="#run-your-pipeline-on-the-production-branch">above</a>) and check the
results through <code>http://localhost:5000</code> to see your new line added.<br>
<strong>Notes:</strong></p>
<div class="ulist">
<ul>
<li>
<p>Since your browser is likely to cache the contents of the npm <code>serve</code> module,
you may need to refresh your browser page to see your change.</p>
</li>
<li>
<p>In a real software development environment with small to large teams of
people, pulling changes between branches is more likely to be conducted using
pull requests on a cloud- or web-hosted Git service (such as GitHub or
BitBucket).</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="clearing-the-app-from-your-browser"><a class="anchor" href="#clearing-the-app-from-your-browser"></a>Clearing the app from your browser</h3>
<div class="paragraph">
<p>Your browser is likely to continue running your application&#8217;s content served by
the <a href="https://www.npmjs.com/package/serve">npm <code>serve</code> module</a>, which means
that your browser will still show the content you viewed at
<code>http://localhost:5000</code> long after Jenkins has killed off the <code>serve</code> process.
To clear the application and its content from your browser:</p>
</div>
<div class="sect3">
<h4 id="on-chrome"><a class="anchor" href="#on-chrome"></a>On Chrome</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following into your browser&#8217;s URL field:<br>
<code>chrome://serviceworker-internals/</code></p>
</li>
<li>
<p>Locate the "ServiceWorker" entry for <code>http://localhost:5000</code></p>
</li>
<li>
<p>Click its <strong>Unregister</strong> button.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="on-firefox"><a class="anchor" href="#on-firefox"></a>On Firefox</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following into your browser&#8217;s URL field:<br>
<code>about:serviceworkers</code></p>
</li>
<li>
<p>Locate the "Registered Service Worker" entry for <code>http://localhost:5000</code></p>
</li>
<li>
<p>Click its <strong>Unregister</strong> button.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="wrapping-up"><a class="anchor" href="#wrapping-up"></a>Wrapping up</h3>
<div class="paragraph">
<p>Well done! You&#8217;ve just used Jenkins to build a multibranch Pipeline project
with selectively run stages!</p>
</div>
<div class="paragraph">
<p>This tutorial demonstrated the power of using a single <code>Jenkinsfile</code> across
multiple branches of your repository to orchestrate different build and delivery
outcomes in Jenkins.</p>
</div>
<div class="paragraph">
<p>Because Jenkins is extremely extensible, it can be modified and configured to
handle practically any aspect of build orchestration and automation.</p>
</div>
<div class="paragraph">
<p>To learn more about what Jenkins can do, check out:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="/doc/tutorials">Tutorials overview</a> page for other introductory
tutorials.</p>
</li>
<li>
<p>The <a href="/doc/book">User Handbook</a> for more detailed information about using
Jenkins, such as <a href="/doc/book/pipeline">Pipelines</a> (in particular
<a href="/doc/book/pipeline/syntax">Pipeline syntax</a>) and the
<a href="/doc/book/blueocean">Blue Ocean</a> interface.</p>
</li>
<li>
<p>The <a href="/node">Jenkins blog</a> for the latest events, other tutorials and
updates.</p>
</li>
</ul>
</div>
<hr>
<!-- HTML inclusion for chapter and section layouts (i.e. as footers) as well as
     for use in AsciiDoc file inclusions. -->

<!--
This feedback form was prepared from a Google Form, based on the techniques in
the following documentation sources:
https://codepen.io/learningcode/post/customize-a-google-form-for-your-website,
https://mrhaki.blogspot.com.au/2014/06/awesome-asciidoc-include-raw-html.html,
https://www.freshtechtips.com/2013/05/custom-google-drive-contact-form.html,
https://stackoverflow.com/questions/24436165/set-value-of-hidden-input-inside-form
-->

<!-- Feedback form functionality in JavaScript - refer to comments in this file
     for details on the functionality. -->
<script>
var feedbackForm = {
    formKey : 'e/1FAIpQLSfCEexH09x_-ytEyE7wetizqOvE_-06WkK89dpBLEJcYnOp8w'
};
$(document).ready(function() {
    window.onload = feedbackForm.start(window.location.href);
});
</script>
<script src="/js/feedback-form-functionality.js"></script>

<p><a href="#feedback" data-toggle="collapse">Was this page helpful?</a></p>

<div id="feedback" class="collapse">

<p>Please submit your feedback about this page through this
<a href="/doc/feedback-form/">quick form</a>.</p>

<p>Alternatively, if you don't wish to complete the quick form, you can simply
indicate if you found this page helpful?</p>

<!-- Redirects to custom "thank you" page once form is submitted. -->
<script type="text/javascript">
var submitted=false;
</script>
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"
onload="if(submitted) {window.location='/doc/thank-you-for-your-feedback/';}">
</iframe>
<form action="https://docs.google.com/forms/d/e/1FAIpQLSfCEexH09x_-ytEyE7wetizqOvE_-06WkK89dpBLEJcYnOp8w/formResponse" method="POST" id="ss-form" target="hidden_iframe" onsubmit="submitted=true;">

<!-- Set the value of the current URL into the form. -->
<input type="hidden" name="entry.1246830226" id="current-url" value=""/>

<!-- The answer bit -->
<p><input type="radio" name="entry.790002525" id="h1" value="Yes" required/>
<label for="h1">Yes</label>&nbsp;&nbsp;&nbsp;&nbsp;
<input type="radio" name="entry.790002525" id="h2" value="No"/>
<label for="h2">No</label></p>

<!-- The CAPTCHA bit -->

<p><label id="ssTestLabel" for="ssTestValue"></label><br/>
<input type="text" name="ssTestValue" value="" id="ssTestValue"/></p>

<!-- Submit button -->

<p><input class="button" type="submit" value="Submit"/></p>

</form>

<p>See existing feedback <a href="https://docs.google.com/spreadsheets/d/1IIdpVs39JDYKg0sLQIv-MNO928qcGApAIfdW5ohfD78" target="_blank">here</a>.</p>

</div>
</div>
</div>
</div>
</div>


<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/anchor-js/anchor.min.js"></script>
<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/tether/js/tether.min.js"></script>
<script src="https://zbynek.github.io/jenkins.io/order-syntax/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<footer id="footer">
<div class="container">
<div class="row">
<div class="col-md-4">
<p class="box">
<a href="https://github.com/jenkins-infra/jenkins.io/edit/master/content//doc/tutorials/build-a-multibranch-pipeline-project.adoc" title="Edit /doc/tutorials/build-a-multibranch-pipeline-project.adoc on GitHub">Improve this page</a>
|
<a href="https://github.com/jenkins-infra/jenkins.io/commits/master/content//doc/tutorials/build-a-multibranch-pipeline-project.adoc" title="View /doc/tutorials/build-a-multibranch-pipeline-project.adoc history on GitHub">Page history</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img alt="Creative Commons Attribution-ShareAlike license" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
The content driving this site is licensed under the Creative
Commons Attribution-ShareAlike 4.0 license.
</p>
</div>
</div>
</div>
<div class="links col-md-8">
<div class="container">
<div class="row">
<div class="area col-md-3">
<div class="div-mar">
<h5>Resources</h5>
<ul class="resources">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/download">
Downloads
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/node">
Blog
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/doc">
Documentation
</a>
</li>
<li>
<a href="https://plugins.jenkins.io/">
Plugins
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/security">
Security
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/participate">
Contributing
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Project</h5>
<ul class="project">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/project">
Structure and governance
</a>
</li>
<li>
<a href="https://issues.jenkins-ci.org">
Issue tracker
</a>
</li>
<li>
<a href="https://wiki.jenkins.io">
Wiki
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins on Jenkins
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Community</h5>
<ul class="community">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/events">
Events
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/mailing-lists">
Mailing lists
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/chat">
Chats
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/sigs">
Special Interest Groups
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>Other</h5>
<ul class="other">
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/conduct">
Code of Conduct
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/press">
Press information
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/merchandise">
Merchandise
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/artwork">
Artwork
</a>
</li>
<li>
<a href="https://zbynek.github.io/jenkins.io/order-syntax/awards">
Awards
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
  
  $(function(){
    var $body = $(document.body);
    $(".nav-link.dropdown-toggle").on("mousedown", function(){
      $body.addClass("no-outline");
    })
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
</body>
</html>
